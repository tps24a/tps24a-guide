<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¨­å‚™é ç´„æŒ‡å—ç³»çµ±</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Microsoft JhengHei", "å¾®è»Ÿæ­£é»‘é«”", sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            color: #333;
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
        }

        /* èƒŒæ™¯å‹•ç•«æ•ˆæœ */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 800"><circle cx="100" cy="100" r="80" fill="rgba(255,255,255,0.02)"/><circle cx="300" cy="300" r="120" fill="rgba(255,255,255,0.02)"/><circle cx="600" cy="200" r="60" fill="rgba(255,255,255,0.02)"/><circle cx="900" cy="400" r="100" fill="rgba(255,255,255,0.02)"/><circle cx="1100" cy="600" r="90" fill="rgba(255,255,255,0.02)"/></svg>');
            animation: float 20s infinite ease-in-out;
            pointer-events: none;
            z-index: 0;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        /* ä¸»å…§å®¹å€ */
        .main-container {
            max-width: 1200px;
            margin: 30px auto;
            padding: 0 20px;
            flex: 1;
            width: 100%;
            position: relative;
            z-index: 1;
        }

        /* å€å¡Šæ¨£å¼ */
        .section {
            background: white;
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
        }

        .section:hover {
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
        }

        .section.disabled {
            opacity: 0.6;
            pointer-events: none;
        }

        /* æ¨™é¡Œå€å¡Š */
        .header-section {
            text-align: center;
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            animation: fadeInDown 0.8s ease-out;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .header-section h1 {
            font-size: 2.8rem;
            margin-bottom: 15px;
            background: linear-gradient(135deg, #2a5298, #1e3c72);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 700;
        }

        .header-section h1::before {
            content: 'ğŸ§­ ';
            -webkit-text-fill-color: initial;
        }

        .header-section .subtitle {
            font-size: 1.15rem;
            color: #64748b;
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #e0e0e0;
        }

        .section-icon {
            width: 35px;
            height: 35px;
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 18px;
            transition: all 0.3s ease;
        }

        .section:hover .section-icon {
            transform: scale(1.1) rotate(5deg);
        }

        .section-title {
            font-size: 1.2em;
            color: #2c3e50;
            font-weight: 600;
        }

        /* é¸é …æ¨£å¼ */
        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 12px;
        }

        .option-card {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
        }

        .option-card:hover:not(.disabled) {
            border-color: #2196F3;
            background: #f0f7ff;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .option-card.selected {
            background: #e3f2fd;
            border-color: #2196F3;
        }

        .option-card.disabled {
            opacity: 0.5;
            cursor: not-allowed;
            background: #e9ecef;
        }

        .option-card.exclusive {
            border-style: dashed;
            background: #fffbf0;
        }

        .option-card.exclusive.selected {
            background: #fff8e1;
            border-color: #ff9800;
        }

        .option-card.exclusive:hover:not(.disabled) {
            border-color: #ff9800;
            background: #fff3e0;
        }

        .option-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 5px;
        }

        .option-checkbox {
            width: 18px;
            height: 18px;
            cursor: pointer;
            pointer-events: none;
        }

        .option-label {
            font-weight: 600;
            color: #333;
            cursor: pointer;
            flex: 1;
        }

        .option-desc {
            font-size: 0.85em;
            color: #666;
            margin-left: 28px;
        }

        .sub-options {
            margin-top: 10px;
            margin-left: 28px;
            padding-top: 10px;
            border-top: 1px solid #e0e0e0;
        }

        .sub-option {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 6px;
        }

        .sub-option label {
            font-size: 0.85em;
            color: #555;
            cursor: pointer;
        }

        /* æŒ‰éˆ•æ¨£å¼ */
        .generate-button {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            color: white;
            border: none;
            padding: 16px 35px;
            font-size: 1.05em;
            font-weight: 600;
            border-radius: 30px;
            cursor: pointer;
            display: block;
            margin: 25px auto;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .generate-button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .generate-button:hover::before {
            width: 300px;
            height: 300px;
        }

        .generate-button:hover {
            background: linear-gradient(135deg, #2563eb, #1d4ed8);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(37, 99, 235, 0.3);
        }

        /* çµæœå€åŸŸ */
        .results-container {
            display: none;
        }

        .results-header {
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            padding: 20px;
            border-radius: 14px;
            margin-bottom: 20px;
            color: white;
        }

        .results-title {
            font-size: 1.3em;
            color: white;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .results-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
        }

        .summary-item {
            background: white;
            padding: 10px 15px;
            border-radius: 8px;
        }

        .summary-label {
            font-size: 0.8em;
            color: #666;
            margin-bottom: 2px;
        }

        .summary-value {
            font-weight: 600;
            color: #2c3e50;
            font-size: 0.95em;
        }

        /* åˆ‡æ›æŒ‰éˆ• */
        .view-toggle {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }

        .toggle-button {
            padding: 12px 24px;
            border: none;
            background: #f1f5f9;
            color: #64748b;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-size: 0.9em;
            font-weight: 600;
            position: relative;
            overflow: hidden;
        }

        .toggle-button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(59, 130, 246, 0.2);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .toggle-button:hover::before {
            width: 300px;
            height: 300px;
        }

        .toggle-button.active {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(59, 130, 246, 0.3);
        }

        .toggle-button:hover:not(.active) {
            background: #e2e8f0;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        /* é ç´„æ­¥é©Ÿ */
        .booking-category {
            background: #f0f0f0;
            padding: 10px 15px;
            margin: 20px 0 10px 0;
            border-radius: 8px;
            font-weight: 600;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .booking-step {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            padding: 20px;
            margin-bottom: 12px;
            margin-left: 20px;
            display: flex;
            gap: 15px;
            transition: all 0.3s ease;
        }

        .booking-step:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            transform: translateY(-2px);
        }

        .step-number {
            width: 30px;
            height: 30px;
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
            flex-shrink: 0;
            transition: all 0.3s ease;
        }

        .booking-step:hover .step-number {
            transform: scale(1.1) rotate(10deg);
        }

        .step-content {
            flex: 1;
        }

        .step-title {
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: default;
        }

        .step-title.clickable {
            cursor: pointer;
        }

        .step-title.clickable:hover .toggle-icon {
            background: #e0e0e0;
        }

        .toggle-icon {
            width: 20px;
            height: 20px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            font-size: 12px;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .step-description {
            background: #f0f4f8;
            padding: 12px;
            border-radius: 6px;
            margin-top: 8px;
            margin-bottom: 12px;
            font-size: 0.85em;
            color: #555;
            line-height: 1.6;
            display: none;
        }

        .step-description.show {
            display: block;
        }

        .step-booking {
            background: #e3f2fd;
            color: #2563eb;
            padding: 4px 10px;
            border-radius: 15px;
            display: inline-block;
            font-size: 0.85em;
            margin-bottom: 12px;
            font-weight: 600;
        }

        .step-note {
            color: #666;
            font-size: 0.85em;
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .step-note ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .step-note li {
            padding-left: 20px;
            position: relative;
            margin-bottom: 8px;
        }

        .step-note li:before {
            content: "â€¢";
            position: absolute;
            left: 5px;
            font-weight: bold;
        }

        .step-note strong {
            font-weight: 600;
            text-decoration: underline;
        }

        .step-note u {
            text-decoration: underline;
        }

        .step-time {
            font-size: 0.8em;
            margin-top: 8px;
        }

        .time-available {
            color: #4CAF50;
            margin-right: 10px;
            font-weight: 600;
        }

        .time-warning {
            color: #FF9800;
            margin-right: 10px;
            font-weight: 600;
        }

        .time-unavailable {
            color: #f44336;
            font-weight: 600;
        }

        .optional-tag {
            background: #FFC107;
            color: #795548;
            padding: 2px 6px;
            border-radius: 10px;
            font-size: 0.75em;
            font-weight: 500;
            margin-left: 6px;
        }

        /* æç¤ºæ¡† */
        .info-box {
            background: #e3f2fd;
            color: #2c3e50;
            padding: 12px 15px;
            border-radius: 6px;
            margin: 20px 0;
            font-size: 0.9em;
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: flex-start;
            gap: 8px;
        }

        .info-icon {
            color: #3b82f6;
            font-size: 0.9em;
            flex-shrink: 0;
        }

        .reset-button {
            background: linear-gradient(135deg, #64748b, #475569);
            color: white;
            border: none;
            padding: 16px 35px;
            font-size: 1.05em;
            font-weight: 600;
            border-radius: 30px;
            cursor: pointer;
            display: block;
            margin: 20px auto 5px;  /* ä¸Šæ–¹ 20pxï¼Œä¸‹æ–¹æ”¹ç‚º 5px */
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .reset-button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .reset-button:hover::before {
            width: 300px;
            height: 300px;
        }

        .reset-button:hover {
            background: linear-gradient(135deg, #475569, #334155);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(71, 85, 105, 0.3);
        }

        /* è¼‰å…¥å‹•ç•« */
        .loading {
            display: none;
            text-align: center;
            padding: 50px;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3b82f6;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading p {
            color: white;
            font-size: 1.1em;
        }

        /* é å°¾ */
        .footer {
            margin-top: -30px;
            padding: 20px 0;
            background: transparent;
            border-radius: 0;
            box-shadow: none;
            backdrop-filter: none;
            text-align: center;
            color: #cbd5e1;
            font-size: 0.9em;
            line-height: 1.6;
        }

        .footer strong {
            font-weight: 600;
            color: #ffffff;
        }

        /* éŸ¿æ‡‰å¼è¨­è¨ˆ */
        @media (max-width: 768px) {
            .header-section h1 {
                font-size: 2rem;
            }
            
            .header-section {
                padding: 30px 20px;
            }
            
            .main-container {
                padding: 0 15px;
            }
            
            .toggle-button {
                padding: 10px 20px;
                font-size: 0.85em;
            }
        }

        .footer a:hover {
            color: #cbd5e1;
            text-decoration: underline;
        }
    </style>
</head>

<body>
    <!-- ä¸»å…§å®¹ -->
    <div class="main-container">
        <div id="selectionForm">
            <!-- æ¨™é¡Œå€å¡Š -->
            <div class="header-section">
                <h1>TPS 24A1 è¨­å‚™èˆ‡æŠ€è¡“æ”¯æ´é ç´„æŒ‡å—</h1>
                <p class="subtitle">æ ¹æ“šæ‚¨çš„æ¨£æœ¬é¡å‹èˆ‡ä½¿ç”¨è€…èº«ä»½ï¼Œç‚ºæ‚¨æä¾›æœ€é©åˆçš„é ç´„æµç¨‹</p>
            </div>

            <!-- A. æ¨£æœ¬ç¨®é¡ -->
            <div class="section" id="section-a">
                <div class="section-header">
                    <div class="section-icon">A</div>
                    <h2 class="section-title">æ¨£æœ¬ç¨®é¡é¸æ“‡</h2>
                </div>
                <div class="options-grid">
                    <div class="option-card" onclick="selectSample('room-temp')">
                        <div class="option-header">
                            <input type="radio" name="sample" value="room-temp" class="option-checkbox">
                            <label class="option-label">å¸¸æº«è‡ªå‚™æ¨£æœ¬</label>
                        </div>
                        <div class="option-desc">å·²æº–å‚™å¥½çš„å¸¸æº«æ¨£æœ¬ï¼Œå¯ç›´æ¥é€²è¡Œå…‰æŸç·šå¯¦é©—</div>
                    </div>
                    <div class="option-card" onclick="selectSample('adherent')">
                        <div class="option-header">
                            <input type="radio" name="sample" value="adherent" class="option-checkbox">
                            <label class="option-label">è²¼ç›¤ç´°èƒ</label>
                        </div>
                        <div class="option-desc">éœ€è¦åŸ¹é¤Šçš„è²¼é™„å‹ç´°èƒæ¨£æœ¬</div>
                    </div>
                    <div class="option-card" onclick="selectSample('suspension')">
                        <div class="option-header">
                            <input type="radio" name="sample" value="suspension" class="option-checkbox">
                            <label class="option-label">æ‡¸æµ®æ¨£æœ¬</label>
                        </div>
                        <div class="option-desc">æ‡¸æµ®åŸ¹é¤Šçš„ç´°èƒã€ç´°èŒã€é»´èŒæˆ–è—»é¡ç­‰æ¨£æœ¬</div>
                    </div>
                </div>
            </div>

            <!-- B. ç›®å‰èº«ä»½ -->
            <div class="section disabled" id="section-b">
                <div class="section-header">
                    <div class="section-icon">B</div>
                    <h2 class="section-title">ç›®å‰ä½¿ç”¨è€…èº«ä»½ï¼ˆå¯è¤‡é¸ï¼‰</h2>
                </div>
                <div class="options-grid">
                    <div class="option-card exclusive" onclick="toggleCurrent('none')">
                        <div class="option-header">
                            <input type="checkbox" id="current-none" class="option-checkbox">
                            <label class="option-label">ä¸€èˆ¬ä½¿ç”¨è€…</label>
                        </div>
                        <div class="option-desc">å°šæœªå–å¾—ä»»ä½• Superuser è³‡æ ¼</div>
                    </div>
                    <div class="option-card" onclick="toggleCurrent('plunge')">
                        <div class="option-header">
                            <input type="checkbox" id="current-plunge" class="option-checkbox">
                            <label class="option-label">æ€¥è¡å¼å†·å‡å„€ Superuser</label>
                        </div>
                        <div class="option-desc">å·²å–å¾—æ€¥è¡å¼å†·å‡å„€æ“ä½œè³‡æ ¼</div>
                        <div class="sub-options" style="display:none;" id="plunge-mode">
                            <div class="sub-option">
                                <input type="radio" id="plunge-self" name="plunge-mode" value="self" checked>
                                <label for="plunge-self">è‡ªè¡Œæ“ä½œï¼ˆ00:00-24:00ï¼‰</label>
                            </div>
                            <div class="sub-option">
                                <input type="radio" id="plunge-assist" name="plunge-mode" value="assist">
                                <label for="plunge-assist">éœ€è¦å”ä½œï¼ˆ09:00-18:00ï¼‰</label>
                            </div>
                        </div>
                    </div>
                    <div class="option-card" onclick="toggleCurrent('screen')">
                        <div class="option-header">
                            <input type="checkbox" id="current-screen" class="option-checkbox">
                            <label class="option-label">å†·å‡æ¨£æœ¬ç¯©é¸ç³»çµ± Superuser</label>
                        </div>
                        <div class="option-desc">å·²å–å¾—ç¯©é¸ç³»çµ±æ“ä½œè³‡æ ¼</div>
                    </div>
                    <div class="option-card" onclick="toggleCurrent('sxt')">
                        <div class="option-header">
                            <input type="checkbox" id="current-sxt" class="option-checkbox">
                            <label class="option-label">SXTå¯¦é©—ç«™ Superuser</label>
                        </div>
                        <div class="option-desc">å·²å–å¾—SXTå¯¦é©—ç«™æ“ä½œè³‡æ ¼</div>
                        <div class="sub-options" style="display:none;" id="sxt-mode">
                            <div class="sub-option">
                                <input type="radio" id="sxt-self" name="sxt-mode" value="self" checked>
                                <label for="sxt-self">è‡ªè¡Œæ“ä½œï¼ˆ00:00-24:00ï¼‰</label>
                            </div>
                            <div class="sub-option">
                                <input type="radio" id="sxt-assist" name="sxt-mode" value="assist">
                                <label for="sxt-assist">éœ€è¦å”ä½œï¼ˆ09:00-18:00ï¼‰</label>
                            </div>
                        </div>
                    </div>
                    <div class="option-card" onclick="toggleCurrent('amira')">
                        <div class="option-header">
                            <input type="checkbox" id="current-amira" class="option-checkbox">
                            <label class="option-label">Amiraå½±åƒåˆ†å‰²å·¥ä½œç«™ Superuser</label>
                        </div>
                        <div class="option-desc">å·²å–å¾—å½±åƒåˆ†å‰²å·¥ä½œç«™æ“ä½œè³‡æ ¼</div>
                    </div>
                </div>
            </div>

            <!-- C. ç›®æ¨™èº«ä»½ -->
            <div class="section disabled" id="section-c">
                <div class="section-header">
                    <div class="section-icon">C</div>
                    <h2 class="section-title">æœŸæœ›é”æˆçš„ä½¿ç”¨è€…èº«ä»½ï¼ˆå¯è¤‡é¸ï¼‰</h2>
                </div>
                <div class="options-grid">
                    <div class="option-card exclusive" onclick="toggleTarget('maintain')">
                        <div class="option-header">
                            <input type="checkbox" id="target-maintain" class="option-checkbox">
                            <label class="option-label">ç¶­æŒåŸæœ‰ä½¿ç”¨è€…èº«ä»½</label>
                        </div>
                        <div class="option-desc">ä¸éœ€è¦æ¥å—ä»»ä½•æ–°çš„æ•™è‚²è¨“ç·´</div>
                    </div>
                    <div class="option-card" onclick="toggleTarget('plunge')">
                        <div class="option-header">
                            <input type="checkbox" id="target-plunge" class="option-checkbox">
                            <label class="option-label">æ€¥è¡å¼å†·å‡å„€ Superuser</label>
                        </div>
                        <div class="option-desc">å­¸ç¿’æ“ä½œæ€¥è¡å¼å†·å‡å„€</div>
                    </div>
                    <div class="option-card" onclick="toggleTarget('screen')">
                        <div class="option-header">
                            <input type="checkbox" id="target-screen" class="option-checkbox">
                            <label class="option-label">å†·å‡æ¨£æœ¬ç¯©é¸ç³»çµ± Superuser</label>
                        </div>
                        <div class="option-desc">å­¸ç¿’æ“ä½œç¯©é¸ç³»çµ±</div>
                    </div>
                    <div class="option-card" onclick="toggleTarget('sxt')">
                        <div class="option-header">
                            <input type="checkbox" id="target-sxt" class="option-checkbox">
                            <label class="option-label">SXTå¯¦é©—ç«™ Superuser</label>
                        </div>
                        <div class="option-desc">å­¸ç¿’æ“ä½œSXTå¯¦é©—ç«™</div>
                    </div>
                    <div class="option-card" onclick="toggleTarget('amira')">
                        <div class="option-header">
                            <input type="checkbox" id="target-amira" class="option-checkbox">
                            <label class="option-label">Amiraå½±åƒåˆ†å‰²å·¥ä½œç«™ Superuser</label>
                        </div>
                        <div class="option-desc">å­¸ç¿’æ“ä½œAmiraå½±åƒåˆ†å‰²è»Ÿé«”</div>
                    </div>
                </div>
            </div>

            <button class="generate-button" onclick="generateGuide()">ç”Ÿæˆå°ˆå±¬é ç´„æŒ‡å—</button>
        </div>

        <div class="loading" id="loading">
            <div class="loading-spinner"></div>
            <p>æ­£åœ¨ç”Ÿæˆæ‚¨çš„å°ˆå±¬é ç´„æŒ‡å—...</p>
        </div>

        <div id="results" class="results-container"></div>
    </div>

    <!-- é å°¾ -->
    <footer class="footer">
        <strong>NSRRC TPS 24A1 Booking Guide ğŸš€ v1.0 | July 2025</strong><br>
        Developed by Chia-Chun Hsieh | <a href="mailto:hsieh.cc@nsrrc.org.tw" style="color: #94a3b8; text-decoration: underline;">hsieh.cc@nsrrc.org.tw</a>
    </footer>

    <!-- JavaScript éƒ¨åˆ† -->
<script>

        let selectedSample = '';
        let currentStatus = [];
        let targetStatus = [];
        let viewMode = 'sequence'; // 'sequence' or 'category'

        function selectSample(type) {
            selectedSample = type;
            document.querySelectorAll('input[name="sample"]').forEach(radio => {
                radio.checked = radio.value === type;
                radio.closest('.option-card').classList.toggle('selected', radio.checked);
            });
            
            // å•Ÿç”¨Bå’ŒCå€å¡Š
            document.getElementById('section-b').classList.remove('disabled');
            document.getElementById('section-c').classList.remove('disabled');
            
            // æ›´æ›æ¨£æœ¬ç¨®é¡æ™‚ï¼Œé‡ç½®Bå’ŒCçš„é¸æ“‡
            resetBCSelections();
            
            // æ ¹æ“šæ¨£æœ¬é¡å‹æ‡‰ç”¨ä¸åŒçš„é‚è¼¯
            if (type === 'room-temp') {
                // å¸¸æº«è‡ªå‚™æ¨£æœ¬ - ç¦ç”¨æŸäº›é¸é …ä½†ä¿æŒäº’æ–¥é‚è¼¯
                ['plunge', 'screen'].forEach(id => {
                    const bOption = document.getElementById(`current-${id}`).closest('.option-card');
                    bOption.classList.add('disabled');
                    document.getElementById(`current-${id}`).checked = false;
                    document.getElementById(`current-${id}`).disabled = true;
                    bOption.classList.remove('selected');
                    
                    const cOption = document.getElementById(`target-${id}`).closest('.option-card');
                    cOption.classList.add('disabled');
                    document.getElementById(`target-${id}`).checked = false;
                    document.getElementById(`target-${id}`).disabled = true;
                    cOption.classList.remove('selected');
                });
                
                // éš±è—ç›¸é—œå­é¸é …
                document.getElementById('plunge-mode').style.display = 'none';
            } else {
                // è²¼ç›¤ç´°èƒå’Œæ‡¸æµ®ç´°èƒ - å•Ÿç”¨æ‰€æœ‰é¸é …
                ['plunge', 'screen'].forEach(id => {
                    const bOption = document.getElementById(`current-${id}`).closest('.option-card');
                    bOption.classList.remove('disabled');
                    document.getElementById(`current-${id}`).disabled = false;
                    
                    const cOption = document.getElementById(`target-${id}`).closest('.option-card');
                    cOption.classList.remove('disabled');
                    document.getElementById(`target-${id}`).disabled = false;
                });
            }
            
            // æ‡‰ç”¨äº’æ–¥é‚è¼¯
            updateMutualExclusion();
        }

        function resetBCSelections() {
            // é‡ç½®æ‰€æœ‰Bå’ŒCçš„é¸æ“‡
            currentStatus = [];
            targetStatus = [];
            
            // æ¸…é™¤Bå€å¡Šçš„æ‰€æœ‰é¸æ“‡
            ['none', 'plunge', 'screen', 'sxt', 'amira'].forEach(id => {
                const checkbox = document.getElementById(`current-${id}`);
                checkbox.checked = false;
                checkbox.closest('.option-card').classList.remove('selected');
                if (id === 'plunge' || id === 'sxt') {
                    document.getElementById(`${id}-mode`).style.display = 'none';
                    // é‡ç½®ç‚ºè‡ªè¡Œæ“ä½œ
                    document.querySelector(`input[name="${id}-mode"][value="self"]`).checked = true;
                }
            });
            
            // æ¸…é™¤Cå€å¡Šçš„æ‰€æœ‰é¸æ“‡
            ['maintain', 'plunge', 'screen', 'sxt', 'amira'].forEach(id => {
                const checkbox = document.getElementById(`target-${id}`);
                checkbox.checked = false;
                checkbox.closest('.option-card').classList.remove('selected');
            });
            
            // æ¢å¾©æ‰€æœ‰é¸é …ç‚ºå¯ç”¨ç‹€æ…‹ï¼ˆé™¤äº†æ¨£æœ¬é¡å‹ç‰¹å®šçš„ç¦ç”¨ï¼‰
            document.querySelectorAll('#section-b .option-card, #section-c .option-card').forEach(card => {
                const checkbox = card.querySelector('.option-checkbox');
                if (checkbox) {
                    card.classList.remove('disabled');
                    checkbox.disabled = false;
                }
            });
        }

        function toggleCurrent(type) {
            const checkbox = document.getElementById(`current-${type}`);
            const card = checkbox.closest('.option-card');
            
            if (checkbox.disabled) return;
            
            checkbox.checked = !checkbox.checked;
            card.classList.toggle('selected', checkbox.checked);
            
            if (type === 'none' && checkbox.checked) {
                // é¸æ“‡ä¸€èˆ¬ä½¿ç”¨è€…æ™‚
                ['plunge', 'screen', 'sxt', 'amira'].forEach(t => {
                    const el = document.getElementById(`current-${t}`);
                    el.checked = false;
                    el.closest('.option-card').classList.remove('selected');
                    document.getElementById(`${t}-mode`)?.style && (document.getElementById(`${t}-mode`).style.display = 'none');
                });
                currentStatus = ['none'];
                
                // å°æ–¼è²¼ç›¤ç´°èƒå’Œæ‡¸æµ®ç´°èƒï¼Œæª¢æŸ¥ä¸¦è‡ªå‹•å‹¾é¸Cçš„å†·å‡æ¨£æœ¬ç¯©é¸ç³»çµ±
                if (selectedSample === 'adherent' || selectedSample === 'suspension') {
                    const screenEl = document.getElementById('target-screen');
                    
                    // å¦‚æœCçš„å†·å‡æ¨£æœ¬ç¯©é¸ç³»çµ±æ²’æœ‰è¢«é¸æ“‡ï¼Œé¡¯ç¤ºæé†’ä¸¦è‡ªå‹•å‹¾é¸
                    if (!targetStatus.includes('screen')) {
                        alert('éå†·å‡æ¨£æœ¬ç¯©é¸è¼‰å° Superuserï¼Œé ˆæ¥å—ç›¸é—œè¨“ç·´');
                        
                        if (!screenEl.disabled) {
                            screenEl.checked = true;
                            screenEl.closest('.option-card').classList.add('selected');
                            targetStatus = targetStatus.filter(s => s !== 'maintain');
                            targetStatus.push('screen');
                            
                            // å–æ¶ˆç¶­æŒåŸæœ‰èº«ä»½
                            const maintainEl = document.getElementById('target-maintain');
                            maintainEl.checked = false;
                            maintainEl.closest('.option-card').classList.remove('selected');
                        }
                    }
                    
                    // ç¦ç”¨ç¶­æŒåŸæœ‰èº«ä»½é¸é …
                    const maintainEl = document.getElementById('target-maintain');
                    maintainEl.closest('.option-card').classList.add('disabled');
                    maintainEl.disabled = true;
                    maintainEl.checked = false;
                    maintainEl.closest('.option-card').classList.remove('selected');
                    targetStatus = targetStatus.filter(s => s !== 'maintain');
                }
            } else if (type !== 'none' && checkbox.checked) {
                // é¸æ“‡ä»»ä½•superuseræ™‚ï¼Œå–æ¶ˆä¸€èˆ¬ä½¿ç”¨è€…
                const noneEl = document.getElementById('current-none');
                noneEl.checked = false;
                noneEl.closest('.option-card').classList.remove('selected');
                currentStatus = currentStatus.filter(s => s !== 'none');
                
                // Bå–æ¶ˆä¸€èˆ¬ä½¿ç”¨è€…æ™‚ï¼ŒCè‡ªå‹•å–æ¶ˆå†·å‡æ¨£æœ¬ç¯©é¸ç³»çµ±ï¼ˆå¦‚æœä¹‹å‰æ˜¯å› ç‚ºä¸€èˆ¬ä½¿ç”¨è€…è€Œè‡ªå‹•å‹¾é¸çš„ï¼‰
                if ((selectedSample === 'adherent' || selectedSample === 'suspension') && 
                    targetStatus.includes('screen') && targetStatus.length === 1) {
                    const screenEl = document.getElementById('target-screen');
                    screenEl.checked = false;
                    screenEl.closest('.option-card').classList.remove('selected');
                    targetStatus = targetStatus.filter(s => s !== 'screen');
                }
                
                if (!currentStatus.includes(type)) {
                    currentStatus.push(type);
                }
                
                // æ¢å¾©Cå€å¡Šçš„ç¶­æŒåŸæœ‰èº«ä»½é¸é …
                const maintainEl = document.getElementById('target-maintain');
                maintainEl.closest('.option-card').classList.remove('disabled');
                maintainEl.disabled = false;
                
                // é¡¯ç¤ºæ“ä½œæ¨¡å¼é¸é …
                if (['plunge', 'sxt'].includes(type)) {
                    document.getElementById(`${type}-mode`).style.display = 'block';
                }
            } else {
                // å–æ¶ˆå‹¾é¸
                currentStatus = currentStatus.filter(s => s !== type);
                if (['plunge', 'sxt'].includes(type)) {
                    document.getElementById(`${type}-mode`).style.display = 'none';
                }
                
                // å¦‚æœBå–æ¶ˆä¸€èˆ¬ä½¿ç”¨è€…ï¼ŒCä¹Ÿè¦å–æ¶ˆå†·å‡æ¨£æœ¬ç¯©é¸ç³»çµ±
                if (type === 'none' && (selectedSample === 'adherent' || selectedSample === 'suspension')) {
                    const screenEl = document.getElementById('target-screen');
                    if (screenEl.checked && targetStatus.includes('screen')) {
                        screenEl.checked = false;
                        screenEl.closest('.option-card').classList.remove('selected');
                        targetStatus = targetStatus.filter(s => s !== 'screen');
                    }
                }
                
                // å¦‚æœå–æ¶ˆæ‰€æœ‰é¸é …ï¼Œæ¢å¾©Cå€å¡Šçš„ç¶­æŒåŸæœ‰èº«ä»½
                if (currentStatus.length === 0) {
                    const maintainEl = document.getElementById('target-maintain');
                    maintainEl.closest('.option-card').classList.remove('disabled');
                    maintainEl.disabled = false;
                }
            }
            
            updateMutualExclusion();
        }

        function toggleTarget(type) {
            const checkbox = document.getElementById(`target-${type}`);
            const card = checkbox.closest('.option-card');
            
            if (checkbox.disabled) return;
            
            checkbox.checked = !checkbox.checked;
            card.classList.toggle('selected', checkbox.checked);
            
            if (type === 'maintain' && checkbox.checked) {
                // ç¶­æŒåŸæœ‰èº«åˆ†æ™‚ï¼Œå–æ¶ˆå…¶ä»–é¸é …
                ['plunge', 'screen', 'sxt', 'amira'].forEach(t => {
                    const el = document.getElementById(`target-${t}`);
                    el.checked = false;
                    el.closest('.option-card').classList.remove('selected');
                });
                targetStatus = ['maintain'];
            } else if (type !== 'maintain' && checkbox.checked) {
                // é¸æ“‡ä»»ä½•superuseræ™‚ï¼Œå–æ¶ˆç¶­æŒåŸæœ‰èº«åˆ†
                const maintainEl = document.getElementById('target-maintain');
                maintainEl.checked = false;
                maintainEl.closest('.option-card').classList.remove('selected');
                targetStatus = targetStatus.filter(s => s !== 'maintain');
                
                if (!targetStatus.includes(type)) {
                    targetStatus.push(type);
                }
            } else {
                targetStatus = targetStatus.filter(s => s !== type);
                
                // ç‰¹æ®Šè™•ç†ï¼šå¦‚æœå–æ¶ˆCçš„å†·å‡æ¨£æœ¬ç¯©é¸ç³»çµ±ï¼Œä¸”Bæ˜¯ä¸€èˆ¬ä½¿ç”¨è€…ï¼Œå‰‡Bä¹Ÿè¦å–æ¶ˆ
                if (type === 'screen' && currentStatus.includes('none') && (selectedSample === 'adherent' || selectedSample === 'suspension')) {
                    const noneEl = document.getElementById('current-none');
                    noneEl.checked = false;
                    noneEl.closest('.option-card').classList.remove('selected');
                    currentStatus = currentStatus.filter(s => s !== 'none');
                    
                    // æ¢å¾©Cå€å¡Šçš„ç¶­æŒåŸæœ‰èº«ä»½é¸é …
                    const maintainEl = document.getElementById('target-maintain');
                    maintainEl.closest('.option-card').classList.remove('disabled');
                    maintainEl.disabled = false;
                }
            }
            
            updateMutualExclusion();
        }

        function updateMutualExclusion() {
            // å°æ‰€æœ‰æ¨£æœ¬é¡å‹æ‡‰ç”¨é›™å‘äº’æ–¥é‚è¼¯
            ['plunge', 'screen', 'sxt', 'amira'].forEach(type => {
                const targetOption = document.getElementById(`target-${type}`);
                const targetCard = targetOption.closest('.option-card');
                const currentOption = document.getElementById(`current-${type}`);
                const currentCard = currentOption.closest('.option-card');
                
                // å¦‚æœæ˜¯å¸¸æº«è‡ªå‚™æ¨£æœ¬ä¸”æ˜¯ plunge æˆ– screenï¼Œè·³éè™•ç†ï¼ˆå·²ç¶“è¢«ç¦ç”¨ï¼‰
                if (selectedSample === 'room-temp' && ['plunge', 'screen'].includes(type)) {
                    return;
                }
                
                // Bå½±éŸ¿Cï¼šæ ¹æ“šç•¶å‰èº«ä»½ç¦ç”¨å°æ‡‰çš„ç›®æ¨™é¸é …
                if (currentStatus.includes(type)) {
                    targetCard.classList.add('disabled');
                    targetOption.disabled = true;
                    targetOption.checked = false;
                    targetCard.classList.remove('selected');
                    targetStatus = targetStatus.filter(t => t !== type);
                } else {
                    targetCard.classList.remove('disabled');
                    targetOption.disabled = false;
                }
                
                // Cå½±éŸ¿Bï¼šæ ¹æ“šç›®æ¨™èº«ä»½ç¦ç”¨å°æ‡‰çš„ç•¶å‰é¸é …
                if (targetStatus.includes(type)) {
                    currentCard.classList.add('disabled');
                    currentOption.disabled = true;
                    currentOption.checked = false;
                    currentCard.classList.remove('selected');
                    currentStatus = currentStatus.filter(s => s !== type);
                    // éš±è—å­é¸é …
                    if (['plunge', 'sxt'].includes(type)) {
                        document.getElementById(`${type}-mode`).style.display = 'none';
                    }
                } else if (!currentStatus.includes('none')) {
                    currentCard.classList.remove('disabled');
                    currentOption.disabled = false;
                }
            });
        }

        // é˜²æ­¢å­é¸é …é»æ“Šäº‹ä»¶å†’æ³¡
        document.querySelectorAll('.sub-options').forEach(subOptions => {
            subOptions.addEventListener('click', function(e) {
                e.stopPropagation();
            });
        });

        function generateGuide() {
            if (!selectedSample) {
                alert('è«‹é¸æ“‡æ¨£æœ¬ç¨®é¡');
                return;
            }
            
            if (currentStatus.length === 0) {
                alert('è«‹é¸æ“‡ç›®å‰èº«ä»½');
                return;
            }
            
            if (targetStatus.length === 0) {
                alert('è«‹é¸æ“‡æœŸæœ›é”æˆçš„èº«ä»½');
                return;
            }
            
            // å°æ–¼è²¼ç›¤ç´°èƒå’Œæ‡¸æµ®ç´°èƒï¼Œæª¢æŸ¥æ˜¯å¦æœ‰å†·å‡æ¨£æœ¬ç¯©é¸ç³»çµ± Superuser
            if ((selectedSample === 'adherent' || selectedSample === 'suspension') && 
                !currentStatus.includes('screen') && !targetStatus.includes('screen')) {
                alert('éå†·å‡æ¨£æœ¬ç¯©é¸è¼‰å° Superuserï¼Œé ˆæ¥å—ç›¸é—œè¨“ç·´');
                
                // è‡ªå‹•å‹¾é¸Cçš„å†·å‡æ¨£æœ¬ç¯©é¸ç³»çµ± Superuser
                const screenEl = document.getElementById('target-screen');
                if (!screenEl.disabled) {
                    screenEl.checked = true;
                    screenEl.closest('.option-card').classList.add('selected');
                    if (!targetStatus.includes('screen')) {
                        targetStatus.push('screen');
                    }
                    
                    // å¦‚æœæœ‰å‹¾é¸ç¶­æŒåŸæœ‰èº«ä»½ï¼Œè¦å–æ¶ˆ
                    if (targetStatus.includes('maintain')) {
                        const maintainEl = document.getElementById('target-maintain');
                        maintainEl.checked = false;
                        maintainEl.closest('.option-card').classList.remove('selected');
                        targetStatus = targetStatus.filter(s => s !== 'maintain');
                    }
                    
                    // æ›´æ–°äº’æ–¥é‚è¼¯
                    updateMutualExclusion();
                }
                return;
            }
            
            // é¡¯ç¤ºè¼‰å…¥å‹•ç•«
            document.getElementById('loading').style.display = 'block';
            document.getElementById('selectionForm').style.display = 'none';

            // æ¨¡æ“¬è¼‰å…¥æ™‚é–“
            setTimeout(() => {
                document.getElementById('loading').style.display = 'none';
                displayResults();
            }, 800);
        }

        function displayResults() {
            const resultsDiv = document.getElementById('results');
            resultsDiv.style.display = 'block';

            const plungeMode = document.querySelector('input[name="plunge-mode"]:checked')?.value || 'self';
            const sxtMode = document.querySelector('input[name="sxt-mode"]:checked')?.value || 'self';

            // æ¨™é¡Œå’Œæ‘˜è¦
            let html = `
                <div class="section">
                    <div class="results-header">
                        <h2 class="results-title">ğŸ§­ æ‚¨çš„å°ˆå±¬é ç´„æŒ‡å—</h2>
                        <div class="results-summary">
                            <div class="summary-item">
                                <div class="summary-label">æ¨£æœ¬ç¨®é¡</div>
                                <div class="summary-value">${getSampleName(selectedSample)}</div>
                            </div>
                            <div class="summary-item">
                                <div class="summary-label">ç›®å‰èº«ä»½</div>
                                <div class="summary-value">${getCurrentStatusDisplay()}</div>
                            </div>
                            <div class="summary-item">
                                <div class="summary-label">ç›®æ¨™èº«ä»½</div>
                                <div class="summary-value">${getTargetStatusDisplay()}</div>
                            </div>
                        </div>
                        ${!targetStatus.includes('maintain') && targetStatus.some(t => !currentStatus.includes(t)) ? `
                            <div class="info-box" style="margin-top: 15px; margin-bottom: 5px;">
                                <span class="info-icon">â„¹ï¸</span>
                                <span><strong>æé†’ï¼š</strong>æ‚¨é¸æ“‡æˆç‚ºæ–°çš„ Superuserï¼Œç›¸é—œè¨­å‚™å°‡å®‰æ’æ•™è‚²è¨“ç·´èª²ç¨‹ã€‚å¾…å®Œæˆè¨“ç·´ä¸¦ç¶“æ ¸å¯å¾Œï¼Œå³å¯ç²å¾—è©²è¨­å‚™çš„ç¨ç«‹æ“ä½œè³‡æ ¼ã€‚</span>
                            </div>
                        ` : ''}
                    </div>
                    
                    <div class="view-toggle">
                        <button class="toggle-button active" onclick="switchView('sequence')">å¯¦é©—é †åº</button>
                        <button class="toggle-button" onclick="switchView('category')">é ç´„é …ç›®åˆ†é¡</button>
                    </div>
                    
                    <div id="booking-content">
                        ${generateBookingSteps()}
                    </div>
                    
                    <button class="reset-button" onclick="resetForm()">é‡æ–°é¸æ“‡</button>
                </div>
            `;

            resultsDiv.innerHTML = html;
        }

        function switchView(mode) {
            viewMode = mode;
            
            // æ›´æ–°æŒ‰éˆ•ç‹€æ…‹
            document.querySelectorAll('.toggle-button').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // é‡æ–°ç”Ÿæˆå…§å®¹
            document.getElementById('booking-content').innerHTML = generateBookingSteps();
        }

        function getSampleName(type) {
            const names = {
                'room-temp': 'å¸¸æº«è‡ªå‚™æ¨£æœ¬',
                'adherent': 'è²¼ç›¤ç´°èƒ',
                'suspension': 'æ‡¸æµ®ç´°èƒ'
            };
            return names[type] || type;
        }

        function getCurrentStatusDisplay() {
            if (currentStatus.includes('none')) return 'ä¸€èˆ¬ä½¿ç”¨è€…';
            
            // é¡¯ç¤ºæ“ä½œæ¨¡å¼
            return currentStatus.map(s => {
                let name = getStatusName(s);
                if (s === 'plunge' && currentStatus.includes('plunge')) {
                    const mode = document.querySelector('input[name="plunge-mode"]:checked')?.value;
                    if (mode === 'assist') name += ' (éœ€è¦å”ä½œ)';
                }
                if (s === 'sxt' && currentStatus.includes('sxt')) {
                    const mode = document.querySelector('input[name="sxt-mode"]:checked')?.value;
                    if (mode === 'assist') name += ' (éœ€è¦å”ä½œ)';
                }
                return name;
            }).join('ã€');
        }

        function getTargetStatusDisplay() {
            if (targetStatus.includes('maintain')) return 'ç¶­æŒåŸæœ‰èº«ä»½';
            return targetStatus.map(s => getStatusName(s)).join('ã€');
        }

        function getStatusName(status) {
            const names = {
                'plunge': 'æ€¥è¡å¼å†·å‡å„€',
                'screen': 'å†·å‡æ¨£æœ¬ç¯©é¸ç³»çµ±',
                'sxt': 'SXTå¯¦é©—ç«™',
                'amira': 'Amiraå½±åƒåˆ†å‰²å·¥ä½œç«™'
            };
            return names[status] || status;
        }

        function toggleDescription(element) {
            const desc = element.nextElementSibling;
            const icon = element.querySelector('.toggle-icon');
            
            if (desc && desc.classList.contains('step-description')) {
                desc.classList.toggle('show');
                icon.textContent = desc.classList.contains('show') ? 'â–¼' : 'â–¶';
            }
        }

        function formatNoteWithBullets(noteText) {
            // å°‡ç­†è¨˜æ–‡å­—åˆ†æˆå¤šè¡Œä¸¦åŠ ä¸Šé …ç›®ç¬¦è™Ÿ
            const lines = noteText.split('<br>').filter(line => line.trim());
            return '<ul>' + lines.map(line => '<li>' + line + '</li>').join('') + '</ul>';
        }

        function generateBookingSteps() {
            const plungeMode = document.querySelector('input[name="plunge-mode"]:checked')?.value || 'self';
            const sxtMode = document.querySelector('input[name="sxt-mode"]:checked')?.value || 'self';
            
            let steps = [];
            let html = '';

            // æ¨™é¡Œèªªæ˜æ˜ å°„
            const titleDescriptions = {
                'ç´°èƒåŸ¹é¤Š': 'å°‡ç´°èƒåŸ¹é¤Šåœ¨é‡‘ç¶²ä¸Šï¼Œä»¥åˆ©å¾ŒçºŒå¯¦é©—ç«™è§€å¯Ÿã€‚',
                'ç´°èƒæ“ä½œ': 'å°é‡‘ç¶²ä¸Šçš„ç´°èƒé€²è¡Œç›¸é—œçš„å¯¦é©—æ“ä½œã€‚',
                'ç´°èƒè§€å¯Ÿ': 'é€²è¡Œåˆæ­¥çš„æ¨£æœ¬ç¯©é¸ï¼ŒåŒ…å«æ¨£æœ¬ç‹€æ…‹ã€è²¼é™„å¯†åº¦åŠæ˜¯å¦å…·å‚™æ¨£æœ¬é è¨ˆè§€å¯Ÿç¾è±¡ã€‚',
                'æ¨£æœ¬å†·å‡': 'å°‡åŸ¹é¤Šæœ‰ç´°èƒçš„é‡‘ç¶²ï¼Œåˆ©ç”¨æ€¥è¡å¼å†·å‡å„€é€²è¡Œå¿«é€Ÿå†·å‡ã€‚',
                'å†·å‡æ¨£æœ¬ç¯©é¸': 'å°‡å·²å†·å‡çš„æ¨£æœ¬ç½®æ–¼å†·å‡ç¯©é¸è¼‰å°ä¸Šé€²è¡Œç¯©é¸ã€‚',
                'å¯¦é©—ç«™ä¸Šæ©Ÿ (beamtime)': 'å°‡æ¨£æœ¬åˆ©ç”¨è½‰ç§»è…”é«”å‚³é€åˆ°å¯¦é©—ç«™ä¸»è…”é«”å…§ï¼Œä¸¦é€²è¡Œè§€å¯Ÿã€‚',
                'å½±åƒ3DåŒ–': 'å°‡SXTçš„æ—‹è½‰å½±åƒåˆ©ç”¨Imodè»Ÿé«”é€²è¡Œå½±åƒé‡å»ºï¼Œè½‰æ›ç‚º3D Z-stackå †ç–Šå½±åƒã€‚',
                '3Då½±åƒå¥—è‰²': 'å°‡å·²é‡å»ºçš„3D Z-stackå †ç–Šå½±åƒå¯è¦–åŒ–ï¼Œé‡å°ä¸åŒçµæ§‹é€²è¡Œå¥—è‰²ã€‚ç›®å‰å¯¦é©—ç«™ä½¿ç”¨çš„å¥—è‰²è»Ÿé«”æœ‰Amira (éœ€é«˜é¡è»Ÿé«”è²»ç”¨åŠé«˜æ•ˆèƒ½ç¡¬é«”)ã€3dmod (å…è²»)ï¼Œå»ºè­°å­¸ç¿’åˆæœŸä»¥3dmodç‚ºä¸»ï¼Œæ–¹å¯åœ¨ç”¨æˆ¶ç«¯é€²è¡Œç·´ç¿’ã€‚',
                'Amiraå½±åƒåˆ†å‰²å·¥ä½œç«™': 'é«˜æ•ˆèƒ½å·¥ä½œç«™ä¾›ç”¨æˆ¶é€²è¡ŒAmiraè»Ÿé«”æ“ä½œã€‚',
                'è³‡æ–™åˆ†æèˆ‡è¨è«–': 'ç•¶ç”¨æˆ¶å®ŒæˆSXTå½±åƒé‡å»ºæˆ–è«–æ–‡åˆç¨¿æ’°å¯«ï¼Œéœ€è¦é€²ä¸€æ­¥è¨è«–æˆ–å”åŠ©ï¼Œå¯èˆ‡å¯¦é©—ç«™åŒä»é ç´„è¨è«– (å¯å¯¦é«”æˆ–ç·šä¸Š)ã€‚'
            };

            if (selectedSample === 'room-temp') {
                // å¸¸æº«è‡ªå‚™æ¨£æœ¬æµç¨‹
                
                // SXTå¯¦é©—ç«™
                if (currentStatus.includes('sxt')) {
                    if (sxtMode === 'self') {
                        steps.push({
                            category: 'è¨­å‚™é ç´„ (Superuser ONLY)',
                            title: 'å¯¦é©—ç«™ä¸Šæ©Ÿ (beamtime)',
                            booking: '07. SXTå¯¦é©—ç«™ (Superuser ONLY)',
                            note: '<strong><u>é ç´„æ™‚é–“åƒ…é™åœ¨æ‰€å±¬beamtimeæ’ç¨‹å…§</u></strong>ã€‚<br>ç”±Superuserè‡ªè¡Œæ“ä½œè©²è¨­å‚™ï¼Œ<strong><u>ä¸¦è«‹æ–¼ä½¿ç”¨å¾Œç¢ºå¯¦é—œé–‰GV9åŠIzero</u></strong>ã€‚',
                            time: 'âœ… å…¨æ—¥é–‹æ”¾',
                            timeWarning: 'âš ï¸ åƒ…é™é ç´„æ‰€å±¬beamtimeæ’ç¨‹'
                        });
                    } else {
                        steps.push({
                            category: 'ç„¡éœ€é ç´„',
                            title: 'å¯¦é©—ç«™ä¸Šæ©Ÿ (beamtime)',
                            booking: 'ç„¡éœ€é ç´„',
                            note: 'ä¸ç”¨é€²è¡Œä»»ä½•é ç´„ï¼Œç”±å¯¦é©—ç«™åŒä»é€²è¡Œè¨­å‚™æ“ä½œã€‚',
                            time: 'âœ… é€±é–“09:00-18:00',
                            timeWarning: 'âš ï¸ ä¾æ‰€å±¬beamtimeæ’ç¨‹ï¼Œé€±æœ«åŠåœ‹å®šå‡æ—¥é ˆé›™æ–¹åˆæ„æ–¹èƒ½é€²è¡Œå®‰æ’'
                        });
                    }
                } else if (targetStatus.includes('sxt')) {
                    steps.push({
                        category: 'è¨­å‚™å”ä½œ/è¨“ç·´èª²ç¨‹é ç´„',
                        title: 'å¯¦é©—ç«™ä¸Šæ©Ÿ (beamtime)',
                        booking: '07. SXTå¯¦é©—ç«™ (è¨“ç·´èª²ç¨‹)',
                        note: '<strong><u>è«‹èˆ‡å¯¦é©—ç«™åŒä»è¨è«–è¨“ç·´æ™‚é–“å¾Œå†é€²è¡Œé ç´„</u></strong>ã€‚<br>ç”±å¯¦é©—ç«™åŒä»æä¾›ä½¿ç”¨è€…æ•™è‚²è¨“ç·´ï¼Œä»¥å–å¾—è©²è¨­å‚™Superuserè³‡æ ¼ã€‚',
                        time: 'âœ… é€±é–“09:00-18:00',
                        timeWarning: 'âš ï¸ åƒ…é™é ç´„æ‰€å±¬beamtimeæ’ç¨‹',
                        timeUnavailable: 'âŒ é€±æœ«åŠåœ‹å®šå‡æ—¥ä¸é–‹æ”¾é ç´„'
                    });
                } else {
                    steps.push({
                        category: 'ç„¡éœ€é ç´„',
                        title: 'å¯¦é©—ç«™ä¸Šæ©Ÿ (beamtime)',
                        booking: 'ç„¡éœ€é ç´„',
                        note: 'ä¸ç”¨é€²è¡Œä»»ä½•é ç´„ï¼Œç”±å¯¦é©—ç«™åŒä»é€²è¡Œè¨­å‚™æ“ä½œã€‚',
                        time: 'âœ… é€±é–“09:00-18:00',
                        timeWarning: 'âš ï¸ ä¾æ‰€å±¬beamtimeæ’ç¨‹ï¼Œé€±æœ«åŠåœ‹å®šå‡æ—¥é ˆé›™æ–¹åˆæ„æ–¹èƒ½é€²è¡Œå®‰æ’'
                    });
                }
                
                // æŠ€è¡“æ”¯æ´
                steps.push({
                    category: 'æŠ€è¡“æ”¯æ´',
                    title: 'å½±åƒ3DåŒ–',
                    booking: '09. å½±åƒé‡å»º (è¨“ç·´èª²ç¨‹)',
                    note: '<strong><u>è«‹èˆ‡å¯¦é©—ç«™åŒä»è¨è«–è¨“ç·´æ™‚é–“å¾Œå†é€²è¡Œé ç´„</u></strong>ã€‚<br>ç”¨æˆ¶åˆæœŸæ¥è§¸è©²æŠ€è¡“ï¼Œç”±å¯¦é©—ç«™åŒä»æä¾›ä½¿ç”¨è€…æ•™è‚²è¨“ç·´ï¼›è‹¥å·²ç¶“æœƒå½±åƒé‡å»ºçš„ç”¨æˆ¶ï¼Œä¸éœ€é ç´„ã€‚',
                    optional: true,
                    time: 'âœ… é€±é–“09:00-18:00',
                    timeUnavailable: 'âŒ é€±æœ«åŠåœ‹å®šå‡æ—¥ä¸é–‹æ”¾é ç´„'
                });
                
                steps.push({
                    category: 'æŠ€è¡“æ”¯æ´',
                    title: '3Då½±åƒå¥—è‰²',
                    booking: '10. 3dmodå½±åƒåˆ†å‰² (è¨“ç·´èª²ç¨‹)',
                    note: '<strong><u>è«‹èˆ‡å¯¦é©—ç«™åŒä»è¨è«–è¨“ç·´æ™‚é–“å¾Œå†é€²è¡Œé ç´„</u></strong>ã€‚<br>ç”¨æˆ¶åˆæœŸæ¥è§¸è©²æŠ€è¡“ï¼Œç”±å¯¦é©—ç«™åŒä»æä¾›ä½¿ç”¨è€…æ•™è‚²è¨“ç·´ï¼›è‹¥å·²ç¶“æœƒ3dmodå½±åƒåˆ†å‰²çš„ç”¨æˆ¶ï¼Œä¸éœ€é ç´„ã€‚',
                    optional: true,
                    time: 'âœ… é€±é–“09:00-18:00',
                    timeUnavailable: 'âŒ é€±æœ«åŠåœ‹å®šå‡æ—¥ä¸é–‹æ”¾é ç´„'
                });
                
                // Amiraç›¸é—œé …ç›®
                if (targetStatus.includes('amira')) {
                    steps.push({
                        category: 'æŠ€è¡“æ”¯æ´',
                        title: '3Då½±åƒå¥—è‰²',
                        booking: '10. Amiraå½±åƒåˆ†å‰² (è¨“ç·´èª²ç¨‹)',
                        note: '<strong><u>è«‹èˆ‡å¯¦é©—ç«™åŒä»è¨è«–è¨“ç·´æ™‚é–“å¾Œå†é€²è¡Œé ç´„</u></strong>ã€‚<br>ç”¨æˆ¶åˆæœŸæ¥è§¸è©²æŠ€è¡“ï¼Œç”±å¯¦é©—ç«™åŒä»æä¾›ä½¿ç”¨è€…æ•™è‚²è¨“ç·´ï¼›è‹¥å·²ç¶“æœƒAmiraå½±åƒåˆ†å‰²çš„ç”¨æˆ¶ï¼Œä¸éœ€é ç´„ã€‚',
                        optional: true,
                        time: 'âœ… é€±é–“09:00-18:00',
                        timeUnavailable: 'âŒ é€±æœ«åŠåœ‹å®šå‡æ—¥ä¸é–‹æ”¾é ç´„'
                    });
                } else if (currentStatus.includes('amira')) {
                    steps.push({
                        category: 'è¨­å‚™é ç´„ (Superuser ONLY)',
                        title: 'Amiraå½±åƒåˆ†å‰²å·¥ä½œç«™',
                        booking: '08. Amiraå½±åƒåˆ†å‰²å·¥ä½œç«™ (Superuser ONLY)',
                        note: 'è«‹é ç´„æœƒç”¨åˆ°è©²è¨­å‚™çš„æ™‚é–“é»ï¼Œ<strong><u>å¯è¦–éœ€æ±‚é ç´„å¤šå€‹æ™‚æ®µ</u></strong>ã€‚<br>ç”±Superuserè‡ªè¡Œæ“ä½œè©²è¨­å‚™ï¼Œ<strong><u>ä¸¦è«‹æ–¼ä½¿ç”¨å¾Œä»¥ã€Œé›²ç«¯ã€æ–¹å¼é€²è¡Œè³‡æ–™å‚™ä»½</u></strong>ã€‚',
                        optional: true,
                        time: 'âœ… å…¨æ—¥é–‹æ”¾'
                    });
                }
                
                steps.push({
                    category: 'æŠ€è¡“æ”¯æ´',
                    title: 'è³‡æ–™åˆ†æèˆ‡è¨è«–',
                    booking: '11. è³‡æ–™åˆ†æèˆ‡è¨è«– (å”ä½œ)',
                    note: '<strong><u>è«‹èˆ‡å¯¦é©—ç«™åŒä»è¨è«–æœƒè­°æ™‚é–“å¾Œå†é€²è¡Œé ç´„</u></strong>ã€‚',
                    optional: true,
                    time: 'âœ… é€±é–“09:00-18:00',
                    timeUnavailable: 'âŒ é€±æœ«åŠåœ‹å®šå‡æ—¥ä¸é–‹æ”¾é ç´„'
                });
                
            } else if (selectedSample === 'adherent') {
                // è²¼ç›¤ç´°èƒæµç¨‹
                
                steps.push({
                    category: 'è¨­å‚™é ç´„',
                    title: 'ç´°èƒåŸ¹é¤Š',
                    booking: '01. äºŒæ°§åŒ–ç¢³åŸ¹é¤Šç®±',
                    note: 'å› ç”¨æˆ¶å¯¦é©—æµç¨‹å„ç•°ï¼Œ<strong><u>è«‹èˆ‡å¯¦é©—ç«™åŒä»è¨è«–å¯¦é©—å®‰æ’å¾Œå†é€²è¡Œé ç´„</u></strong>ã€‚<br><strong><u>è«‹é ç´„é–‹å§‹çš„ç¬¬ä¸€å€‹å°æ™‚å³å¯</u></strong>ï¼Œå¾ŒçºŒç”±å¯¦é©—ç«™åŒä»èª¿æ•´é ç´„æ™‚é–“è‡³å†·å‡æ¨£æœ¬çµæŸã€‚',
                    time: 'âœ… å…¨æ—¥é–‹æ”¾',
                    timeWarning: 'âš ï¸ æƒŸé€±æœ«å¯¦é©—å®¤é–€ç¦æœªé–‹æ”¾ï¼Œè«‹ç•™æ„å‡ºå…¥å®‰æ’ã€‚'
                });
                steps.push({
                    category: 'è¨­å‚™é ç´„',
                    title: 'ç´°èƒæ“ä½œ',
                    booking: '02. ç”Ÿç‰©å®‰å…¨æ“ä½œæ«ƒ',
                    note: 'è«‹é ç´„æœƒç”¨åˆ°è©²è¨­å‚™çš„æ™‚é–“é»(å¦‚ç¨®ç´°èƒã€çµ¦è—¥æˆ–æŸ“è‰²ç­‰)ï¼Œ<strong><u>å¯è¦–éœ€æ±‚é ç´„å¤šå€‹æ™‚æ®µ</u></strong>ã€‚',
                    time: 'âœ… é€±é–“å…¨æ—¥é–‹æ”¾',
                    timeUnavailable: 'âŒ é€±æœ«åŠåœ‹å®šå‡æ—¥ä¸é–‹æ”¾é ç´„'
                });
                
                steps.push({
                    category: 'è¨­å‚™é ç´„',
                    title: 'ç´°èƒè§€å¯Ÿ',
                    booking: '03. è¢å…‰é¡¯å¾®é¡',
                    note: 'è«‹é ç´„æœƒç”¨åˆ°è©²è¨­å‚™çš„æ™‚é–“é»(å¦‚è§€å¯Ÿç´°èƒå‹æ…‹æˆ–æŸ“è‰²ç­‰)ï¼Œ<strong><u>å¯è¦–éœ€æ±‚é ç´„å¤šå€‹æ™‚æ®µ</u></strong>ã€‚',
                    time: 'âœ… é€±é–“å…¨æ—¥é–‹æ”¾',
                    timeUnavailable: 'âŒ é€±æœ«åŠåœ‹å®šå‡æ—¥ä¸é–‹æ”¾é ç´„'
                });
                
                // æ€¥è¡å¼å†·å‡å„€
                if (currentStatus.includes('plunge')) {
                    if (plungeMode === 'self') {
                        steps.push({
                            category: 'è¨­å‚™é ç´„ (Superuser ONLY)',
                            title: 'æ¨£æœ¬å†·å‡',
                            booking: '04. æ€¥è¡å¼å†·å‡å„€ (Superuser ONLY)',
                            note: '<strong><u>é ç´„èµ·å§‹æ™‚é–“è«‹é¸æ“‡åœ¨æ¨£æœ¬å®Œæˆæ‰€æœ‰å‰ç½®ä½œæ¥­ã€å·²é”å¯ä»¥å†·å‡ç‹€æ…‹çš„æ™‚é–“é»</u></strong>ã€‚<br>ç”±Superuserè‡ªè¡Œæ“ä½œè©²è¨­å‚™ï¼Œ<strong><u>ä¸¦è«‹æ–¼ä½¿ç”¨å¾Œç¢ºå¯¦å•Ÿå‹•æ©Ÿå°çƒ˜çƒ¤</u></strong>ã€‚',
                            time: 'âœ… é€±é–“å…¨æ—¥é–‹æ”¾',
                            timeUnavailable: 'âŒ é€±æœ«åŠåœ‹å®šå‡æ—¥ä¸é–‹æ”¾é ç´„'
                        });
                    } else {
                        steps.push({
                            category: 'è¨­å‚™å”ä½œ/è¨“ç·´èª²ç¨‹é ç´„',
                            title: 'æ¨£æœ¬å†·å‡',
                            booking: '04. æ€¥è¡å¼å†·å‡å„€ (å”ä½œ/è¨“ç·´èª²ç¨‹)',
                            note: 'å› è©²è¨­å‚™éœ€æœ‰ç¢ºåˆ‡å•Ÿå‹•æ™‚é–“ï¼Œ<strong><u>è«‹èˆ‡å¯¦é©—ç«™åŒä»è¨è«–å¯¦é©—å®‰æ’å¾Œå†é€²è¡Œé ç´„</u></strong>ï¼Œä¸¦ç”±å¯¦é©—ç«™åŒä»é€²è¡Œè¨­å‚™æ“ä½œã€‚<br><strong><u>é ç´„èµ·å§‹æ™‚é–“è«‹é¸æ“‡åœ¨æ¨£æœ¬å®Œæˆæ‰€æœ‰å‰ç½®ä½œæ¥­ã€å·²é”å¯ä»¥å†·å‡ç‹€æ…‹çš„æ™‚é–“é»</u></strong>ã€‚',
                            time: 'âœ… é€±é–“09:00-18:00',
                            timeUnavailable: 'âŒ é€±æœ«åŠåœ‹å®šå‡æ—¥ä¸é–‹æ”¾é ç´„'
                        });
                    }
                } else if (targetStatus.includes('plunge')) {
                    steps.push({
                        category: 'è¨­å‚™å”ä½œ/è¨“ç·´èª²ç¨‹é ç´„',
                        title: 'æ¨£æœ¬å†·å‡',
                        booking: '04. æ€¥è¡å¼å†·å‡å„€ (å”ä½œ/è¨“ç·´èª²ç¨‹)',
                        note: 'å› è©²è¨­å‚™éœ€æœ‰ç¢ºåˆ‡å•Ÿå‹•æ™‚é–“ï¼Œ<strong><u>è«‹èˆ‡å¯¦é©—ç«™åŒä»è¨è«–å¯¦é©—å®‰æ’å¾Œå†é€²è¡Œé ç´„</u></strong>ï¼Œä¸¦ç”±å¯¦é©—ç«™åŒä»æä¾›ä½¿ç”¨è€…æ•™è‚²è¨“ç·´ï¼Œä»¥å–å¾—è©²è¨­å‚™Superuserè³‡æ ¼ã€‚<br><strong><u>é ç´„èµ·å§‹æ™‚é–“è«‹é¸æ“‡åœ¨æ¨£æœ¬å®Œæˆæ‰€æœ‰å‰ç½®ä½œæ¥­ã€å·²é”å¯ä»¥å†·å‡ç‹€æ…‹çš„æ™‚é–“é»</u></strong>ã€‚',
                        time: 'âœ… é€±é–“09:00-18:00',
                        timeUnavailable: 'âŒ é€±æœ«åŠåœ‹å®šå‡æ—¥ä¸é–‹æ”¾é ç´„'
                    });
                } else {
                    steps.push({
                        category: 'è¨­å‚™å”ä½œ/è¨“ç·´èª²ç¨‹é ç´„',
                        title: 'æ¨£æœ¬å†·å‡',
                        booking: '04. æ€¥è¡å¼å†·å‡å„€ (å”ä½œ/è¨“ç·´èª²ç¨‹)',
                        note: 'å› è©²è¨­å‚™éœ€æœ‰ç¢ºåˆ‡å•Ÿå‹•æ™‚é–“ï¼Œ<strong><u>è«‹èˆ‡å¯¦é©—ç«™åŒä»è¨è«–å¯¦é©—å®‰æ’å¾Œå†é€²è¡Œé ç´„</u></strong>ï¼Œä¸¦ç”±å¯¦é©—ç«™åŒä»é€²è¡Œè¨­å‚™æ“ä½œã€‚<br><strong><u>é ç´„èµ·å§‹æ™‚é–“è«‹é¸æ“‡åœ¨æ¨£æœ¬å®Œæˆæ‰€æœ‰å‰ç½®ä½œæ¥­ã€å·²é”å¯ä»¥å†·å‡ç‹€æ…‹çš„æ™‚é–“é»</u></strong>ã€‚',
                        time: 'âœ… é€±é–“09:00-18:00',
                        timeUnavailable: 'âŒ é€±æœ«åŠåœ‹å®šå‡æ—¥ä¸é–‹æ”¾é ç´„'
                    });
                }
                
                // å†·å‡æ¨£æœ¬ç¯©é¸ç³»çµ±
                if (currentStatus.includes('screen')) {
                    steps.push({
                        category: 'è¨­å‚™é ç´„ (Superuser ONLY)',
                        title: 'å†·å‡æ¨£æœ¬ç¯©é¸',
                        booking: '05. å†·å‡æ¨£æœ¬ç¯©é¸ç³»çµ± (Superuser ONLY)',
                        note: '<strong><u>è‹¥ç‚ºæ¥çºŒå†·å‡æ¨£æœ¬è£½å‚™å¾Œé€²è¡Œé ç´„ï¼Œé ç´„èµ·å§‹æ™‚é–“è«‹é¸æ“‡åœ¨é–‹å§‹å†·å‡å¾Œè‡³å°‘2å€‹å°æ™‚</u></strong>(ä¾‹å¦‚å†·å‡æ¨£æœ¬è£½å‚™æ˜¯10:00é–‹å§‹ï¼Œé‚£ç¯©é¸ç³»çµ±å»ºè­°å®‰æ’åœ¨12:00-18:00)ï¼›è‹¥æ¨£æœ¬å·²äº‹å…ˆå®Œæˆè£½å‚™ï¼Œå‰‡å¯é¸æ“‡é–‹æ”¾æ™‚é–“å…§çš„ä»»æ„å¯é¸æ™‚æ®µã€‚<br>ç”±Superuserè‡ªè¡Œæ“ä½œè©²è¨­å‚™ï¼Œ<strong><u>ä¸¦è«‹è‡ªè¡Œæ–¼ã€Œé ç´„é–‹å§‹å‰1å°æ™‚ã€åˆ°å ´ï¼Œé€²è¡Œå†·å‡ç¯©é¸è¼‰å°å›æº«çƒ˜çƒ¤</u></strong>ï¼›ä½¿ç”¨å®Œç•¢è«‹ç›¡é€Ÿå°‡å†·å‡ç¯©é¸è¼‰å°æ”¾å›é˜²æ½®ç®±ï¼Œä¸é ˆé€²è¡Œçƒ˜çƒ¤ã€‚',
                        time: 'âœ… é€±é–“å…¨æ—¥é–‹æ”¾',
                        timeUnavailable: 'âŒ é€±æœ«åŠåœ‹å®šå‡æ—¥ä¸é–‹æ”¾é ç´„'
                    });
                } else if (targetStatus.includes('screen')) {
                    steps.push({
                        category: 'è¨­å‚™å”ä½œ/è¨“ç·´èª²ç¨‹é ç´„',
                        title: 'å†·å‡æ¨£æœ¬ç¯©é¸',
                        booking: '05. å†·å‡æ¨£æœ¬ç¯©é¸ç³»çµ± (è¨“ç·´èª²ç¨‹)',
                        note: '<strong><u>è‹¥ç‚ºæ¥çºŒå†·å‡æ¨£æœ¬è£½å‚™å¾Œé€²è¡Œé ç´„ï¼Œé ç´„èµ·å§‹æ™‚é–“è«‹é¸æ“‡åœ¨é–‹å§‹å†·å‡å¾Œè‡³å°‘2å€‹å°æ™‚</u></strong>(ä¾‹å¦‚å†·å‡æ¨£æœ¬è£½å‚™æ˜¯10:00é–‹å§‹ï¼Œé‚£ç¯©é¸ç³»çµ±å»ºè­°å®‰æ’åœ¨12:00-18:00)ï¼›è‹¥æ¨£æœ¬å·²äº‹å…ˆå®Œæˆè£½å‚™ï¼Œ<strong><u>è«‹èˆ‡å¯¦é©—ç«™åŒä»ç¢ºèªè¨“ç·´æ™‚é–“å¾Œå†é€²è¡Œé ç´„</u></strong>ã€‚<br>ç”±å¯¦é©—ç«™åŒä»æä¾›ä½¿ç”¨è€…æ•™è‚²è¨“ç·´ï¼Œä»¥å–å¾—è©²è¨­å‚™Superuserè³‡æ ¼ã€‚',
                        time: 'âœ… é€±é–“09:00-18:00',
                        timeUnavailable: 'âŒ é€±æœ«åŠåœ‹å®šå‡æ—¥ä¸é–‹æ”¾é ç´„'
                    });
                } else {
                    steps.push({
                        category: 'è¨­å‚™å”ä½œ/è¨“ç·´èª²ç¨‹é ç´„',
                        title: 'å†·å‡æ¨£æœ¬ç¯©é¸',
                        booking: '05. å†·å‡æ¨£æœ¬ç¯©é¸ç³»çµ± (è¨“ç·´èª²ç¨‹)',
                        note: '<strong><u>è‹¥ç‚ºæ¥çºŒå†·å‡æ¨£æœ¬è£½å‚™å¾Œé€²è¡Œé ç´„ï¼Œé ç´„èµ·å§‹æ™‚é–“è«‹é¸æ“‡åœ¨é–‹å§‹å†·å‡å¾Œè‡³å°‘2å€‹å°æ™‚</u></strong>(ä¾‹å¦‚å†·å‡æ¨£æœ¬è£½å‚™æ˜¯10:00é–‹å§‹ï¼Œé‚£ç¯©é¸ç³»çµ±å»ºè­°å®‰æ’åœ¨12:00-18:00)ï¼›è‹¥æ¨£æœ¬å·²äº‹å…ˆå®Œæˆè£½å‚™ï¼Œ<strong><u>è«‹èˆ‡å¯¦é©—ç«™åŒä»ç¢ºèªè¨“ç·´æ™‚é–“å¾Œå†é€²è¡Œé ç´„</u></strong>ã€‚<br>ç”±å¯¦é©—ç«™åŒä»æä¾›ä½¿ç”¨è€…æ•™è‚²è¨“ç·´ï¼Œä»¥å–å¾—è©²è¨­å‚™Superuserè³‡æ ¼ã€‚',
                        time: 'âœ… é€±é–“09:00-18:00',
                        timeUnavailable: 'âŒ é€±æœ«åŠåœ‹å®šå‡æ—¥ä¸é–‹æ”¾é ç´„'
                    });
                }
                
                // SXTå¯¦é©—ç«™
                if (currentStatus.includes('sxt')) {
                    if (sxtMode === 'self') {
                        steps.push({
                            category: 'è¨­å‚™é ç´„ (Superuser ONLY)',
                            title: 'å¯¦é©—ç«™ä¸Šæ©Ÿ (beamtime)',
                            booking: '07. SXTå¯¦é©—ç«™ (Superuser ONLY)',
                            note: '<strong><u>é ç´„æ™‚é–“åƒ…é™åœ¨æ‰€å±¬beamtimeæ’ç¨‹å…§</u></strong>ã€‚<br>ç”±Superuserè‡ªè¡Œæ“ä½œè©²è¨­å‚™ï¼Œ<strong><u>ä¸¦è«‹æ–¼ä½¿ç”¨å¾Œç¢ºå¯¦é—œé–‰GV9åŠIzero</u></strong>ã€‚',
                            time: 'âœ… å…¨æ—¥é–‹æ”¾',
                            timeWarning: 'âš ï¸ åƒ…é™é ç´„æ‰€å±¬beamtimeæ’ç¨‹'
                        });
                    } else {
                        steps.push({
                            category: 'ç„¡éœ€é ç´„',
                            title: 'å¯¦é©—ç«™ä¸Šæ©Ÿ (beamtime)',
                            booking: 'ç„¡éœ€é ç´„',
                            note: 'ä¸ç”¨é€²è¡Œä»»ä½•é ç´„ï¼Œç”±å¯¦é©—ç«™åŒä»é€²è¡Œè¨­å‚™æ“ä½œã€‚',
                            time: 'âœ… é€±é–“09:00-18:00',
                            timeWarning: 'âš ï¸ ä¾æ‰€å±¬beamtimeæ’ç¨‹ï¼Œé€±æœ«åŠåœ‹å®šå‡æ—¥é ˆé›™æ–¹åˆæ„æ–¹èƒ½é€²è¡Œå®‰æ’'
                        });
                    }
                } else if (targetStatus.includes('sxt')) {
                    steps.push({
                        category: 'è¨­å‚™å”ä½œ/è¨“ç·´èª²ç¨‹é ç´„',
                        title: 'å¯¦é©—ç«™ä¸Šæ©Ÿ (beamtime)',
                        booking: '07. SXTå¯¦é©—ç«™ (è¨“ç·´èª²ç¨‹)',
                        note: '<strong><u>è«‹èˆ‡å¯¦é©—ç«™åŒä»è¨è«–è¨“ç·´æ™‚é–“å¾Œå†é€²è¡Œé ç´„</u></strong>ã€‚<br>ç”±å¯¦é©—ç«™åŒä»æä¾›ä½¿ç”¨è€…æ•™è‚²è¨“ç·´ï¼Œä»¥å–å¾—è©²è¨­å‚™Superuserè³‡æ ¼ã€‚',
                        time: 'âœ… é€±é–“09:00-18:00',
                        timeWarning: 'âš ï¸ åƒ…é™é ç´„æ‰€å±¬beamtimeæ’ç¨‹',
                        timeUnavailable: 'âŒ é€±æœ«åŠåœ‹å®šå‡æ—¥ä¸é–‹æ”¾é ç´„'
                    });
                } else {
                    steps.push({
                        category: 'ç„¡éœ€é ç´„',
                        title: 'å¯¦é©—ç«™ä¸Šæ©Ÿ (beamtime)',
                        booking: 'ç„¡éœ€é ç´„',
                        note: 'ä¸ç”¨é€²è¡Œä»»ä½•é ç´„ï¼Œç”±å¯¦é©—ç«™åŒä»é€²è¡Œè¨­å‚™æ“ä½œã€‚',
                        time: 'âœ… é€±é–“09:00-18:00',
                        timeWarning: 'âš ï¸ ä¾æ‰€å±¬beamtimeæ’ç¨‹ï¼Œé€±æœ«åŠåœ‹å®šå‡æ—¥é ˆé›™æ–¹åˆæ„æ–¹èƒ½é€²è¡Œå®‰æ’'
                    });
                }
                
                // æŠ€è¡“æ”¯æ´å’Œå…¶ä»–é …ç›®ï¼ˆèˆ‡å¸¸æº«è‡ªå‚™æ¨£æœ¬ç›¸åŒï¼‰
                steps.push({
                    category: 'æŠ€è¡“æ”¯æ´',
                    title: 'å½±åƒ3DåŒ–',
                    booking: '09. å½±åƒé‡å»º (è¨“ç·´èª²ç¨‹)',
                    note: '<strong><u>è«‹èˆ‡å¯¦é©—ç«™åŒä»è¨è«–è¨“ç·´æ™‚é–“å¾Œå†é€²è¡Œé ç´„</u></strong>ã€‚<br>ç”¨æˆ¶åˆæœŸæ¥è§¸è©²æŠ€è¡“ï¼Œç”±å¯¦é©—ç«™åŒä»æä¾›ä½¿ç”¨è€…æ•™è‚²è¨“ç·´ï¼›è‹¥å·²ç¶“æœƒå½±åƒé‡å»ºçš„ç”¨æˆ¶ï¼Œä¸éœ€é ç´„ã€‚',
                    optional: true,
                    time: 'âœ… é€±é–“09:00-18:00',
                    timeUnavailable: 'âŒ é€±æœ«åŠåœ‹å®šå‡æ—¥ä¸é–‹æ”¾é ç´„'
                });
                
                steps.push({
                    category: 'æŠ€è¡“æ”¯æ´',
                    title: '3Då½±åƒå¥—è‰²',
                    booking: '10. 3dmodå½±åƒåˆ†å‰² (è¨“ç·´èª²ç¨‹)',
                    note: '<strong><u>è«‹èˆ‡å¯¦é©—ç«™åŒä»è¨è«–è¨“ç·´æ™‚é–“å¾Œå†é€²è¡Œé ç´„</u></strong>ã€‚<br>ç”¨æˆ¶åˆæœŸæ¥è§¸è©²æŠ€è¡“ï¼Œç”±å¯¦é©—ç«™åŒä»æä¾›ä½¿ç”¨è€…æ•™è‚²è¨“ç·´ï¼›è‹¥å·²ç¶“æœƒ3dmodå½±åƒåˆ†å‰²çš„ç”¨æˆ¶ï¼Œä¸éœ€é ç´„ã€‚',
                    optional: true,
                    time: 'âœ… é€±é–“09:00-18:00',
                    timeUnavailable: 'âŒ é€±æœ«åŠåœ‹å®šå‡æ—¥ä¸é–‹æ”¾é ç´„'
                });
                
                // Amiraç›¸é—œé …ç›®
                if (targetStatus.includes('amira')) {
                    steps.push({
                        category: 'æŠ€è¡“æ”¯æ´',
                        title: '3Då½±åƒå¥—è‰²',
                        booking: '10. Amiraå½±åƒåˆ†å‰² (è¨“ç·´èª²ç¨‹)',
                        note: '<strong><u>è«‹èˆ‡å¯¦é©—ç«™åŒä»è¨è«–è¨“ç·´æ™‚é–“å¾Œå†é€²è¡Œé ç´„</u></strong>ã€‚<br>ç”¨æˆ¶åˆæœŸæ¥è§¸è©²æŠ€è¡“ï¼Œç”±å¯¦é©—ç«™åŒä»æä¾›ä½¿ç”¨è€…æ•™è‚²è¨“ç·´ï¼›è‹¥å·²ç¶“æœƒAmiraå½±åƒåˆ†å‰²çš„ç”¨æˆ¶ï¼Œä¸éœ€é ç´„ã€‚',
                        optional: true,
                       time: 'âœ… é€±é–“09:00-18:00',
                       timeUnavailable: 'âŒ é€±æœ«åŠåœ‹å®šå‡æ—¥ä¸é–‹æ”¾é ç´„'
                   });
               } else if (currentStatus.includes('amira')) {
                   steps.push({
                       category: 'è¨­å‚™é ç´„ (Superuser ONLY)',
                       title: 'Amiraå½±åƒåˆ†å‰²å·¥ä½œç«™',
                       booking: '08. Amiraå½±åƒåˆ†å‰²å·¥ä½œç«™ (Superuser ONLY)',
                       note: 'è«‹é ç´„æœƒç”¨åˆ°è©²è¨­å‚™çš„æ™‚é–“é»ï¼Œ<strong><u>å¯è¦–éœ€æ±‚é ç´„å¤šå€‹æ™‚æ®µ</u></strong>ã€‚<br>ç”±Superuserè‡ªè¡Œæ“ä½œè©²è¨­å‚™ï¼Œ<strong><u>ä¸¦è«‹æ–¼ä½¿ç”¨å¾Œä»¥ã€Œé›²ç«¯ã€æ–¹å¼é€²è¡Œè³‡æ–™å‚™ä»½</u></strong>ã€‚',
                       optional: true,
                       time: 'âœ… å…¨æ—¥é–‹æ”¾'
                   });
               }
               
               steps.push({
                   category: 'æŠ€è¡“æ”¯æ´',
                   title: 'è³‡æ–™åˆ†æèˆ‡è¨è«–',
                   booking: '11. è³‡æ–™åˆ†æèˆ‡è¨è«– (å”ä½œ)',
                   note: '<strong><u>è«‹èˆ‡å¯¦é©—ç«™åŒä»è¨è«–æœƒè­°æ™‚é–“å¾Œå†é€²è¡Œé ç´„</u></strong>ã€‚',
                   optional: true,
                   time: 'âœ… é€±é–“09:00-18:00',
                   timeUnavailable: 'âŒ é€±æœ«åŠåœ‹å®šå‡æ—¥ä¸é–‹æ”¾é ç´„'
               });
               
           } else if (selectedSample === 'suspension') {
               // æ‡¸æµ®ç´°èƒæµç¨‹ - èˆ‡è²¼ç›¤ç´°èƒé¡ä¼¼ï¼Œä½†ä¸åŒ…å«å‰ä¸‰å€‹æ­¥é©Ÿ
               
               // æ€¥è¡å¼å†·å‡å„€
               if (currentStatus.includes('plunge')) {
                   if (plungeMode === 'self') {
                       steps.push({
                           category: 'è¨­å‚™é ç´„ (Superuser ONLY)',
                           title: 'æ¨£æœ¬å†·å‡',
                           booking: '04. æ€¥è¡å¼å†·å‡å„€ (Superuser ONLY)',
                           note: '<strong><u>é ç´„èµ·å§‹æ™‚é–“è«‹é¸æ“‡åœ¨æ¨£æœ¬å®Œæˆæ‰€æœ‰å‰ç½®ä½œæ¥­ã€å·²é”å¯ä»¥å†·å‡ç‹€æ…‹çš„æ™‚é–“é»</u></strong>ã€‚<br>ç”±Superuserè‡ªè¡Œæ“ä½œè©²è¨­å‚™ï¼Œ<strong><u>ä¸¦è«‹æ–¼ä½¿ç”¨å¾Œç¢ºå¯¦å•Ÿå‹•æ©Ÿå°çƒ˜çƒ¤</u></strong>ã€‚',
                           time: 'âœ… é€±é–“å…¨æ—¥é–‹æ”¾',
                           timeUnavailable: 'âŒ é€±æœ«åŠåœ‹å®šå‡æ—¥ä¸é–‹æ”¾é ç´„'
                       });
                   } else {
                       steps.push({
                           category: 'è¨­å‚™å”ä½œ/è¨“ç·´èª²ç¨‹é ç´„',
                           title: 'æ¨£æœ¬å†·å‡',
                           booking: '04. æ€¥è¡å¼å†·å‡å„€ (å”ä½œ/è¨“ç·´èª²ç¨‹)',
                           note: 'å› è©²è¨­å‚™éœ€æœ‰ç¢ºåˆ‡å•Ÿå‹•æ™‚é–“ï¼Œ<strong><u>è«‹èˆ‡å¯¦é©—ç«™åŒä»è¨è«–å¯¦é©—å®‰æ’å¾Œå†é€²è¡Œé ç´„</u></strong>ï¼Œä¸¦ç”±å¯¦é©—ç«™åŒä»é€²è¡Œè¨­å‚™æ“ä½œã€‚<br><strong><u>é ç´„èµ·å§‹æ™‚é–“è«‹é¸æ“‡åœ¨æ¨£æœ¬å®Œæˆæ‰€æœ‰å‰ç½®ä½œæ¥­ã€å·²é”å¯ä»¥å†·å‡ç‹€æ…‹çš„æ™‚é–“é»</u></strong>ã€‚',
                           time: 'âœ… é€±é–“09:00-18:00',
                           timeUnavailable: 'âŒ é€±æœ«åŠåœ‹å®šå‡æ—¥ä¸é–‹æ”¾é ç´„'
                       });
                   }
               } else if (targetStatus.includes('plunge')) {
                   steps.push({
                       category: 'è¨­å‚™å”ä½œ/è¨“ç·´èª²ç¨‹é ç´„',
                       title: 'æ¨£æœ¬å†·å‡',
                       booking: '04. æ€¥è¡å¼å†·å‡å„€ (å”ä½œ/è¨“ç·´èª²ç¨‹)',
                       note: 'å› è©²è¨­å‚™éœ€æœ‰ç¢ºåˆ‡å•Ÿå‹•æ™‚é–“ï¼Œ<strong><u>è«‹èˆ‡å¯¦é©—ç«™åŒä»è¨è«–å¯¦é©—å®‰æ’å¾Œå†é€²è¡Œé ç´„</u></strong>ï¼Œä¸¦ç”±å¯¦é©—ç«™åŒä»æä¾›ä½¿ç”¨è€…æ•™è‚²è¨“ç·´ï¼Œä»¥å–å¾—è©²è¨­å‚™Superuserè³‡æ ¼ã€‚<br><strong><u>é ç´„èµ·å§‹æ™‚é–“è«‹é¸æ“‡åœ¨æ¨£æœ¬å®Œæˆæ‰€æœ‰å‰ç½®ä½œæ¥­ã€å·²é”å¯ä»¥å†·å‡ç‹€æ…‹çš„æ™‚é–“é»</u></strong>ã€‚',
                       time: 'âœ… é€±é–“09:00-18:00',
                       timeUnavailable: 'âŒ é€±æœ«åŠåœ‹å®šå‡æ—¥ä¸é–‹æ”¾é ç´„'
                   });
               } else {
                   steps.push({
                       category: 'è¨­å‚™å”ä½œ/è¨“ç·´èª²ç¨‹é ç´„',
                       title: 'æ¨£æœ¬å†·å‡',
                       booking: '04. æ€¥è¡å¼å†·å‡å„€ (å”ä½œ/è¨“ç·´èª²ç¨‹)',
                       note: 'å› è©²è¨­å‚™éœ€æœ‰ç¢ºåˆ‡å•Ÿå‹•æ™‚é–“ï¼Œ<strong><u>è«‹èˆ‡å¯¦é©—ç«™åŒä»è¨è«–å¯¦é©—å®‰æ’å¾Œå†é€²è¡Œé ç´„</u></strong>ï¼Œä¸¦ç”±å¯¦é©—ç«™åŒä»é€²è¡Œè¨­å‚™æ“ä½œã€‚<br><strong><u>é ç´„èµ·å§‹æ™‚é–“è«‹é¸æ“‡åœ¨æ¨£æœ¬å®Œæˆæ‰€æœ‰å‰ç½®ä½œæ¥­ã€å·²é”å¯ä»¥å†·å‡ç‹€æ…‹çš„æ™‚é–“é»</u></strong>ã€‚',
                       time: 'âœ… é€±é–“09:00-18:00',
                       timeUnavailable: 'âŒ é€±æœ«åŠåœ‹å®šå‡æ—¥ä¸é–‹æ”¾é ç´„'
                   });
               }
               
               // å…¶é¤˜æ­¥é©Ÿèˆ‡è²¼ç›¤ç´°èƒç›¸åŒ
               // å†·å‡æ¨£æœ¬ç¯©é¸ç³»çµ±
               if (currentStatus.includes('screen')) {
                   steps.push({
                       category: 'è¨­å‚™é ç´„ (Superuser ONLY)',
                       title: 'å†·å‡æ¨£æœ¬ç¯©é¸',
                       booking: '05. å†·å‡æ¨£æœ¬ç¯©é¸ç³»çµ± (Superuser ONLY)',
                       note: '<strong><u>è‹¥ç‚ºæ¥çºŒå†·å‡æ¨£æœ¬è£½å‚™å¾Œé€²è¡Œé ç´„ï¼Œé ç´„èµ·å§‹æ™‚é–“è«‹é¸æ“‡åœ¨é–‹å§‹å†·å‡å¾Œè‡³å°‘2å€‹å°æ™‚</u></strong>(ä¾‹å¦‚å†·å‡æ¨£æœ¬è£½å‚™æ˜¯10:00é–‹å§‹ï¼Œé‚£ç¯©é¸ç³»çµ±å»ºè­°å®‰æ’åœ¨12:00-18:00)ï¼›è‹¥æ¨£æœ¬å·²äº‹å…ˆå®Œæˆè£½å‚™ï¼Œå‰‡å¯é¸æ“‡é–‹æ”¾æ™‚é–“å…§çš„ä»»æ„å¯é¸æ™‚æ®µã€‚<br>ç”±Superuserè‡ªè¡Œæ“ä½œè©²è¨­å‚™ï¼Œ<strong><u>ä¸¦è«‹è‡ªè¡Œæ–¼ã€Œé ç´„é–‹å§‹å‰1å°æ™‚ã€åˆ°å ´ï¼Œé€²è¡Œå†·å‡ç¯©é¸è¼‰å°å›æº«çƒ˜çƒ¤</u></strong>ï¼›ä½¿ç”¨å®Œç•¢è«‹ç›¡é€Ÿå°‡å†·å‡ç¯©é¸è¼‰å°æ”¾å›é˜²æ½®ç®±ï¼Œä¸é ˆé€²è¡Œçƒ˜çƒ¤ã€‚',
                       time: 'âœ… é€±é–“å…¨æ—¥é–‹æ”¾',
                       timeUnavailable: 'âŒ é€±æœ«åŠåœ‹å®šå‡æ—¥ä¸é–‹æ”¾é ç´„'
                   });
               } else if (targetStatus.includes('screen')) {
                   steps.push({
                       category: 'è¨­å‚™å”ä½œ/è¨“ç·´èª²ç¨‹é ç´„',
                       title: 'å†·å‡æ¨£æœ¬ç¯©é¸',
                       booking: '05. å†·å‡æ¨£æœ¬ç¯©é¸ç³»çµ± (è¨“ç·´èª²ç¨‹)',
                       note: '<strong><u>è‹¥ç‚ºæ¥çºŒå†·å‡æ¨£æœ¬è£½å‚™å¾Œé€²è¡Œé ç´„ï¼Œé ç´„èµ·å§‹æ™‚é–“è«‹é¸æ“‡åœ¨é–‹å§‹å†·å‡å¾Œè‡³å°‘2å€‹å°æ™‚</u></strong>(ä¾‹å¦‚å†·å‡æ¨£æœ¬è£½å‚™æ˜¯10:00é–‹å§‹ï¼Œé‚£ç¯©é¸ç³»çµ±å»ºè­°å®‰æ’åœ¨12:00-18:00)ï¼›è‹¥æ¨£æœ¬å·²äº‹å…ˆå®Œæˆè£½å‚™ï¼Œ<strong><u>è«‹èˆ‡å¯¦é©—ç«™åŒä»ç¢ºèªè¨“ç·´æ™‚é–“å¾Œå†é€²è¡Œé ç´„</u></strong>ã€‚<br>ç”±å¯¦é©—ç«™åŒä»æä¾›ä½¿ç”¨è€…æ•™è‚²è¨“ç·´ï¼Œä»¥å–å¾—è©²è¨­å‚™Superuserè³‡æ ¼ã€‚',
                       time: 'âœ… é€±é–“09:00-18:00',
                       timeUnavailable: 'âŒ é€±æœ«åŠåœ‹å®šå‡æ—¥ä¸é–‹æ”¾é ç´„'
                   });
               } else {
                   steps.push({
                       category: 'è¨­å‚™å”ä½œ/è¨“ç·´èª²ç¨‹é ç´„',
                       title: 'å†·å‡æ¨£æœ¬ç¯©é¸',
                       booking: '05. å†·å‡æ¨£æœ¬ç¯©é¸ç³»çµ± (è¨“ç·´èª²ç¨‹)',
                       note: '<strong><u>è‹¥ç‚ºæ¥çºŒå†·å‡æ¨£æœ¬è£½å‚™å¾Œé€²è¡Œé ç´„ï¼Œé ç´„èµ·å§‹æ™‚é–“è«‹é¸æ“‡åœ¨é–‹å§‹å†·å‡å¾Œè‡³å°‘2å€‹å°æ™‚</u></strong>(ä¾‹å¦‚å†·å‡æ¨£æœ¬è£½å‚™æ˜¯10:00é–‹å§‹ï¼Œé‚£ç¯©é¸ç³»çµ±å»ºè­°å®‰æ’åœ¨12:00-18:00)ï¼›è‹¥æ¨£æœ¬å·²äº‹å…ˆå®Œæˆè£½å‚™ï¼Œ<strong><u>è«‹èˆ‡å¯¦é©—ç«™åŒä»ç¢ºèªè¨“ç·´æ™‚é–“å¾Œå†é€²è¡Œé ç´„</u></strong>ã€‚<br>ç”±å¯¦é©—ç«™åŒä»æä¾›ä½¿ç”¨è€…æ•™è‚²è¨“ç·´ï¼Œä»¥å–å¾—è©²è¨­å‚™Superuserè³‡æ ¼ã€‚',
                       time: 'âœ… é€±é–“09:00-18:00',
                       timeUnavailable: 'âŒ é€±æœ«åŠåœ‹å®šå‡æ—¥ä¸é–‹æ”¾é ç´„'
                   });
               }
               
               // SXTå¯¦é©—ç«™
               if (currentStatus.includes('sxt')) {
                   if (sxtMode === 'self') {
                       steps.push({
                           category: 'è¨­å‚™é ç´„ (Superuser ONLY)',
                           title: 'å¯¦é©—ç«™ä¸Šæ©Ÿ (beamtime)',
                           booking: '07. SXTå¯¦é©—ç«™ (Superuser ONLY)',
                           note: '<strong><u>é ç´„æ™‚é–“åƒ…é™åœ¨æ‰€å±¬beamtimeæ’ç¨‹å…§</u></strong>ã€‚<br>ç”±Superuserè‡ªè¡Œæ“ä½œè©²è¨­å‚™ï¼Œ<strong><u>ä¸¦è«‹æ–¼ä½¿ç”¨å¾Œç¢ºå¯¦é—œé–‰GV9åŠIzero</u></strong>ã€‚',
                           time: 'âœ… å…¨æ—¥é–‹æ”¾',
                           timeWarning: 'âš ï¸ åƒ…é™é ç´„æ‰€å±¬beamtimeæ’ç¨‹'
                       });
                   } else {
                       steps.push({
                           category: 'ç„¡éœ€é ç´„',
                           title: 'å¯¦é©—ç«™ä¸Šæ©Ÿ (beamtime)',
                           booking: 'ç„¡éœ€é ç´„',
                           note: 'ä¸ç”¨é€²è¡Œä»»ä½•é ç´„ï¼Œç”±å¯¦é©—ç«™åŒä»é€²è¡Œè¨­å‚™æ“ä½œã€‚',
                           time: 'âœ… é€±é–“09:00-18:00',
                           timeWarning: 'âš ï¸ ä¾æ‰€å±¬beamtimeæ’ç¨‹ï¼Œé€±æœ«åŠåœ‹å®šå‡æ—¥é ˆé›™æ–¹åˆæ„æ–¹èƒ½é€²è¡Œå®‰æ’'
                       });
                   }
               } else if (targetStatus.includes('sxt')) {
                   steps.push({
                       category: 'è¨­å‚™å”ä½œ/è¨“ç·´èª²ç¨‹é ç´„',
                       title: 'å¯¦é©—ç«™ä¸Šæ©Ÿ (beamtime)',
                       booking: '07. SXTå¯¦é©—ç«™ (è¨“ç·´èª²ç¨‹)',
                       note: '<strong><u>è«‹èˆ‡å¯¦é©—ç«™åŒä»è¨è«–è¨“ç·´æ™‚é–“å¾Œå†é€²è¡Œé ç´„</u></strong>ã€‚<br>ç”±å¯¦é©—ç«™åŒä»æä¾›ä½¿ç”¨è€…æ•™è‚²è¨“ç·´ï¼Œä»¥å–å¾—è©²è¨­å‚™Superuserè³‡æ ¼ã€‚',
                       time: 'âœ… é€±é–“09:00-18:00',
                       timeWarning: 'âš ï¸ åƒ…é™é ç´„æ‰€å±¬beamtimeæ’ç¨‹',
                       timeUnavailable: 'âŒ é€±æœ«åŠåœ‹å®šå‡æ—¥ä¸é–‹æ”¾é ç´„'
                   });
               } else {
                   steps.push({
                       category: 'ç„¡éœ€é ç´„',
                       title: 'å¯¦é©—ç«™ä¸Šæ©Ÿ (beamtime)',
                       booking: 'ç„¡éœ€é ç´„',
                       note: 'ä¸ç”¨é€²è¡Œä»»ä½•é ç´„ï¼Œç”±å¯¦é©—ç«™åŒä»é€²è¡Œè¨­å‚™æ“ä½œã€‚',
                       time: 'âœ… é€±é–“09:00-18:00',
                       timeWarning: 'âš ï¸ ä¾æ‰€å±¬beamtimeæ’ç¨‹ï¼Œé€±æœ«åŠåœ‹å®šå‡æ—¥é ˆé›™æ–¹åˆæ„æ–¹èƒ½é€²è¡Œå®‰æ’'
                   });
               }
               
               // æŠ€è¡“æ”¯æ´
               steps.push({
                   category: 'æŠ€è¡“æ”¯æ´',
                   title: 'å½±åƒ3DåŒ–',
                   booking: '09. å½±åƒé‡å»º (è¨“ç·´èª²ç¨‹)',
                   note: '<strong><u>è«‹èˆ‡å¯¦é©—ç«™åŒä»è¨è«–è¨“ç·´æ™‚é–“å¾Œå†é€²è¡Œé ç´„</u></strong>ã€‚<br>ç”¨æˆ¶åˆæœŸæ¥è§¸è©²æŠ€è¡“ï¼Œç”±å¯¦é©—ç«™åŒä»æä¾›ä½¿ç”¨è€…æ•™è‚²è¨“ç·´ï¼›è‹¥å·²ç¶“æœƒå½±åƒé‡å»ºçš„ç”¨æˆ¶ï¼Œä¸éœ€é ç´„ã€‚',
                   optional: true,
                   time: 'âœ… é€±é–“09:00-18:00',
                   timeUnavailable: 'âŒ é€±æœ«åŠåœ‹å®šå‡æ—¥ä¸é–‹æ”¾é ç´„'
               });
               
               steps.push({
                   category: 'æŠ€è¡“æ”¯æ´',
                   title: '3Då½±åƒå¥—è‰²',
                   booking: '10. 3dmodå½±åƒåˆ†å‰² (è¨“ç·´èª²ç¨‹)',
                   note: '<strong><u>è«‹èˆ‡å¯¦é©—ç«™åŒä»è¨è«–è¨“ç·´æ™‚é–“å¾Œå†é€²è¡Œé ç´„</u></strong>ã€‚<br>ç”¨æˆ¶åˆæœŸæ¥è§¸è©²æŠ€è¡“ï¼Œç”±å¯¦é©—ç«™åŒä»æä¾›ä½¿ç”¨è€…æ•™è‚²è¨“ç·´ï¼›è‹¥å·²ç¶“æœƒ3dmodå½±åƒåˆ†å‰²çš„ç”¨æˆ¶ï¼Œä¸éœ€é ç´„ã€‚',
                   optional: true,
                   time: 'âœ… é€±é–“09:00-18:00',
                   timeUnavailable: 'âŒ é€±æœ«åŠåœ‹å®šå‡æ—¥ä¸é–‹æ”¾é ç´„'
               });
               
               // Amiraç›¸é—œé …ç›®
               if (targetStatus.includes('amira')) {
                   steps.push({
                       category: 'æŠ€è¡“æ”¯æ´',
                       title: '3Då½±åƒå¥—è‰²',
                       booking: '10. Amiraå½±åƒåˆ†å‰² (è¨“ç·´èª²ç¨‹)',
                       note: '<strong><u>è«‹èˆ‡å¯¦é©—ç«™åŒä»è¨è«–è¨“ç·´æ™‚é–“å¾Œå†é€²è¡Œé ç´„</u></strong>ã€‚<br>ç”¨æˆ¶åˆæœŸæ¥è§¸è©²æŠ€è¡“ï¼Œç”±å¯¦é©—ç«™åŒä»æä¾›ä½¿ç”¨è€…æ•™è‚²è¨“ç·´ï¼›è‹¥å·²ç¶“æœƒAmiraå½±åƒåˆ†å‰²çš„ç”¨æˆ¶ï¼Œä¸éœ€é ç´„ã€‚',
                       optional: true,
                       time: 'âœ… é€±é–“09:00-18:00',
                       timeUnavailable: 'âŒ é€±æœ«åŠåœ‹å®šå‡æ—¥ä¸é–‹æ”¾é ç´„'
                   });
               } else if (currentStatus.includes('amira')) {
                   steps.push({
                       category: 'è¨­å‚™é ç´„ (Superuser ONLY)',
                       title: 'Amiraå½±åƒåˆ†å‰²å·¥ä½œç«™',
                       booking: '08. Amiraå½±åƒåˆ†å‰²å·¥ä½œç«™ (Superuser ONLY)',
                       note: 'è«‹é ç´„æœƒç”¨åˆ°è©²è¨­å‚™çš„æ™‚é–“é»ï¼Œ<strong><u>å¯è¦–éœ€æ±‚é ç´„å¤šå€‹æ™‚æ®µ</u></strong>ã€‚<br>ç”±Superuserè‡ªè¡Œæ“ä½œè©²è¨­å‚™ï¼Œ<strong><u>ä¸¦è«‹æ–¼ä½¿ç”¨å¾Œä»¥ã€Œé›²ç«¯ã€æ–¹å¼é€²è¡Œè³‡æ–™å‚™ä»½</u></strong>ã€‚',
                       optional: true,
                       time: 'âœ… å…¨æ—¥é–‹æ”¾'
                   });
               }
               
               steps.push({
                   category: 'æŠ€è¡“æ”¯æ´',
                   title: 'è³‡æ–™åˆ†æèˆ‡è¨è«–',
                   booking: '11. è³‡æ–™åˆ†æèˆ‡è¨è«– (å”ä½œ)',
                   note: '<strong><u>è«‹èˆ‡å¯¦é©—ç«™åŒä»è¨è«–æœƒè­°æ™‚é–“å¾Œå†é€²è¡Œé ç´„</u></strong>ã€‚',
                   optional: true,
                   time: 'âœ… é€±é–“09:00-18:00',
                   timeUnavailable: 'âŒ é€±æœ«åŠåœ‹å®šå‡æ—¥ä¸é–‹æ”¾é ç´„'
               });
           }



            // æ ¹æ“šæª¢è¦–æ¨¡å¼ç”Ÿæˆå…§å®¹
            if (viewMode === 'category') {
                // æŒ‰åˆ†é¡çµ„ç¹”æ­¥é©Ÿ
                const categoryOrder = ['è¨­å‚™é ç´„', 'è¨­å‚™å”ä½œ/è¨“ç·´èª²ç¨‹é ç´„', 'è¨­å‚™é ç´„ (Superuser ONLY)', 'æŠ€è¡“æ”¯æ´', 'ç„¡éœ€é ç´„'];
                const groupedSteps = {};
                
                steps.forEach((step, index) => {
                    step.number = index + 1;
                    if (!groupedSteps[step.category]) {
                        groupedSteps[step.category] = [];
                    }
                    groupedSteps[step.category].push(step);
                });

                // ç”Ÿæˆåˆ†é¡çš„é ç´„æ­¥é©Ÿ
                categoryOrder.forEach(category => {
                    if (groupedSteps[category] && groupedSteps[category].length > 0) {
                        html += `<div class="booking-category">${getCategoryIcon(category)} ${category}</div>`;
                        
                        groupedSteps[category].forEach(step => {
                            html += generateStepHTML(step, titleDescriptions);
                        });
                    }
                });
            } else {
                // å¯¦é©—é †åºï¼ˆæŒ‰æµç¨‹éšæ®µåˆ†çµ„ï¼‰
                const processCategories = {
                    'æ¨£æœ¬å‰ç½®æº–å‚™': ['ç´°èƒåŸ¹é¤Š', 'ç´°èƒæ“ä½œ', 'ç´°èƒè§€å¯Ÿ'],
                    'å†·å‡æ¨£æœ¬æ“ä½œ': ['æ¨£æœ¬å†·å‡', 'å†·å‡æ¨£æœ¬ç¯©é¸'],
                    'SXTå½±åƒæ“·å–': ['å¯¦é©—ç«™ä¸Šæ©Ÿ (beamtime)'],
                    'å½±åƒåˆ†æèˆ‡è¨è«–': ['å½±åƒ3DåŒ–', '3Då½±åƒå¥—è‰²', 'Amiraå½±åƒåˆ†å‰²å·¥ä½œç«™', 'è³‡æ–™åˆ†æèˆ‡è¨è«–']
                };
                
                const processOrder = ['æ¨£æœ¬å‰ç½®æº–å‚™', 'å†·å‡æ¨£æœ¬æ“ä½œ', 'SXTå½±åƒæ“·å–', 'å½±åƒåˆ†æèˆ‡è¨è«–'];
                const groupedByProcess = {};
                
                // çµ¦æ­¥é©Ÿç·¨è™Ÿä¸¦æŒ‰æµç¨‹åˆ†çµ„
                steps.forEach((step, index) => {
                    step.number = index + 1;
                    
                    // æ‰¾å‡ºè©²æ­¥é©Ÿå±¬æ–¼å“ªå€‹æµç¨‹é¡åˆ¥
                    for (const [category, titles] of Object.entries(processCategories)) {
                        if (titles.includes(step.title)) {
                            if (!groupedByProcess[category]) {
                                groupedByProcess[category] = [];
                            }
                            groupedByProcess[category].push(step);
                            break;
                        }
                    }
                });
                
                // ä¾ç…§æµç¨‹é †åºç”Ÿæˆå…§å®¹
                processOrder.forEach(category => {
                    if (groupedByProcess[category] && groupedByProcess[category].length > 0) {
                        html += `<div class="booking-category">${getProcessIcon(category)} ${category}</div>`;
                        
                        groupedByProcess[category].forEach(step => {
                            html += generateStepHTML(step, titleDescriptions);
                        });
                    }
                });
            }

           return html;
       }

       function generateStepHTML(step, titleDescriptions) {
           const hasDescription = titleDescriptions[step.title];
           const descriptionHtml = hasDescription ? `
               <div class="step-description">
                   ${titleDescriptions[step.title].replace(/\n/g, '<br>')}
               </div>
           ` : '';
           
           // æ ¼å¼åŒ– note å…§å®¹ï¼ŒåŠ å…¥é …ç›®ç¬¦è™Ÿ
           const formattedNote = formatNoteWithBullets(step.note);
           
           return `
               <div class="booking-step">
                   <div class="step-number">${step.number}</div>
                   <div class="step-content">
                       <div class="step-title ${hasDescription ? 'clickable' : ''}" ${hasDescription ? 'onclick="toggleDescription(this)"' : ''}>
                           ${hasDescription ? '<span class="toggle-icon">â–¶</span>' : ''}
                           <span>${step.title}</span>
                           ${step.optional ? '<span class="optional-tag">é¸æ“‡æ€§</span>' : ''}
                       </div>
                       ${descriptionHtml}
                       <div class="step-booking">${step.booking}</div>
                       <div class="step-note">${formattedNote}</div>
                       <div class="step-time">
                           <span class="time-available">${step.time}</span>
                           ${step.timeWarning ? `<span class="time-warning">${step.timeWarning}</span>` : ''}
                           ${step.timeUnavailable ? `<span class="time-unavailable">${step.timeUnavailable}</span>` : ''}
                       </div>
                   </div>
               </div>
           `;
       }

       function getCategoryIcon(category) {
           const icons = {
               'è¨­å‚™é ç´„': 'ğŸ“…',
               'è¨­å‚™å”ä½œ/è¨“ç·´èª²ç¨‹é ç´„': 'ğŸ¤',
               'è¨­å‚™é ç´„ (Superuser ONLY)': 'ğŸ§°',
               'ç„¡éœ€é ç´„': 'âŒ',
               'æŠ€è¡“æ”¯æ´': 'ğŸ‘¨â€ğŸ”§'
           };
           return icons[category] || 'ğŸ“Œ';
       }

       function getProcessIcon(process) {
            const icons = {
                'æ¨£æœ¬å‰ç½®æº–å‚™': 'ğŸ§ª',
                'å†·å‡æ¨£æœ¬æ“ä½œ': 'â„ï¸',
                'SXTå½±åƒæ“·å–': 'âš¡',
                'å½±åƒåˆ†æèˆ‡è¨è«–': 'ğŸ“Š'
            };
            return icons[process] || 'ğŸ“Œ';
        }

       function resetForm() {
           document.getElementById('results').style.display = 'none';
           document.getElementById('selectionForm').style.display = 'block';
           
           // é‡ç½®æ‰€æœ‰é¸é …
           selectedSample = '';
           currentStatus = [];
           targetStatus = [];
           viewMode = 'sequence';
           
           // æ¸…é™¤æ‰€æœ‰é¸æ“‡ç‹€æ…‹
           document.querySelectorAll('.option-card').forEach(card => {
               card.classList.remove('selected', 'disabled');
           });
           
           // ç¦ç”¨Bå’ŒCå€å¡Š
           document.getElementById('section-b').classList.add('disabled');
           document.getElementById('section-c').classList.add('disabled');
           
           document.querySelectorAll('input[type="checkbox"], input[type="radio"]').forEach(input => {
               if (input.type === 'checkbox') {
                   input.checked = false;
                   input.disabled = false;
               } else if (input.name === 'sample') {
                   input.checked = false;
               } else if (input.value === 'self') {
                   input.checked = true;
               }
           });
           
           // éš±è—å­é¸é …
           document.querySelectorAll('.sub-options').forEach(sub => {
               sub.style.display = 'none';
           });
       }
   </script>
</body>
</html>